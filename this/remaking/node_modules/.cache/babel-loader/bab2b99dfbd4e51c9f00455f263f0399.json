{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useOverscrollEffect = exports[\"default\"] = void 0;\n\nvar _util = require(\"@enact/core/util\");\n\nvar _resolution = _interopRequireDefault(require(\"@enact/ui/resolution\"));\n\nvar _useScroll = require(\"@enact/ui/useScroll\");\n\nvar _react = require(\"react\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar overscrollTypeDone = _useScroll.constants.overscrollTypeDone,\n    overscrollTypeHold = _useScroll.constants.overscrollTypeHold,\n    overscrollTypeNone = _useScroll.constants.overscrollTypeNone,\n    overscrollTypeOnce = _useScroll.constants.overscrollTypeOnce,\n    overscrollTransitionPrefix = '--scroll-overscroll-transition-',\n    overscrollTranslatePrefix = '--scroll-overscroll-translate-',\n    overscrollTransitionStart = 'transform 300ms cubic-bezier(0.5, 1, 0.89, 1)',\n    overscrollTransitionEnd = 'transform 500ms cubic-bezier(0.34, 1.56, 0.64, 1)',\n    overscrollMaxTranslate = _resolution[\"default\"].scale(180),\n    overscrollTimeout = 220;\n\nvar useOverscrollEffect = function useOverscrollEffect(props, instances) {\n  var scrollContainerHandle = instances.scrollContainerHandle,\n      scrollContentRef = instances.scrollContentRef; // Mutable value\n\n  var mutableRef = (0, _react.useRef)({\n    overscrollJobs: {\n      horizontal: {\n        before: null,\n        after: null\n      },\n      vertical: {\n        before: null,\n        after: null\n      }\n    }\n  }); // Hooks\n\n  var applyOverscrollEffect = (0, _react.useCallback)(function (orientation, edge, type, ratio) {\n    var isHorizontal = orientation === 'horizontal';\n\n    if (type !== overscrollTypeHold && scrollContentRef.current) {\n      var effectSize = ratio * (edge === 'before' ? 1 : -1) * (isHorizontal && scrollContainerHandle.current.rtl ? -1 : 1) * overscrollMaxTranslate,\n          translate = \"translate\".concat(isHorizontal ? 'X' : 'Y', \"(\").concat(effectSize, \"px)\"),\n          transition = ratio !== 0 ? overscrollTransitionStart : overscrollTransitionEnd;\n      scrollContentRef.current.style.setProperty(overscrollTranslatePrefix + orientation, translate);\n      scrollContentRef.current.style.setProperty(overscrollTransitionPrefix + orientation, transition);\n\n      if (type === overscrollTypeOnce) {\n        mutableRef.current.overscrollJobs[orientation][edge].start(orientation, edge, overscrollTypeDone, 0);\n      }\n    }\n  }, [scrollContainerHandle, scrollContentRef]);\n  (0, _react.useEffect)(function () {\n    function createOverscrollJob(orientation, edge) {\n      if (!mutableRef.current.overscrollJobs[orientation][edge]) {\n        mutableRef.current.overscrollJobs[orientation][edge] = new _util.Job(applyOverscrollEffect, overscrollTimeout);\n      }\n    }\n\n    function stopOverscrollJob(orientation, edge) {\n      var job = mutableRef.current.overscrollJobs[orientation][edge];\n\n      if (job) {\n        job.stop();\n      }\n    }\n\n    createOverscrollJob('horizontal', 'before');\n    createOverscrollJob('horizontal', 'after');\n    createOverscrollJob('vertical', 'before');\n    createOverscrollJob('vertical', 'after');\n    return function () {\n      stopOverscrollJob('horizontal', 'before');\n      stopOverscrollJob('horizontal', 'after');\n      stopOverscrollJob('vertical', 'before');\n      stopOverscrollJob('vertical', 'after');\n    };\n  }, [applyOverscrollEffect]); // Functions\n\n  function clearOverscrollEffect(orientation, edge) {\n    mutableRef.current.overscrollJobs[orientation][edge].startAfter(overscrollTimeout, orientation, edge, overscrollTypeNone, 0);\n    scrollContainerHandle.current.setOverscrollStatus(orientation, edge, overscrollTypeNone, 0);\n  }\n\n  function checkAndApplyOverscrollEffectByDirection(direction) {\n    var orientation = direction === 'up' || direction === 'down' ? 'vertical' : 'horizontal',\n        bounds = scrollContainerHandle.current.getScrollBounds(),\n        scrollability = orientation === 'vertical' ? scrollContainerHandle.current.canScrollVertically(bounds) : scrollContainerHandle.current.canScrollHorizontally(bounds);\n\n    if (scrollability) {\n      var isRtl = scrollContainerHandle.current.rtl,\n          edge = direction === 'up' || !isRtl && direction === 'left' || isRtl && direction === 'right' ? 'before' : 'after';\n      scrollContainerHandle.current.checkAndApplyOverscrollEffect(orientation, edge, overscrollTypeOnce);\n    }\n  } // Return\n\n\n  return {\n    applyOverscrollEffect: applyOverscrollEffect,\n    checkAndApplyOverscrollEffectByDirection: checkAndApplyOverscrollEffectByDirection,\n    clearOverscrollEffect: clearOverscrollEffect\n  };\n};\n\nexports.useOverscrollEffect = useOverscrollEffect;\nvar _default = useOverscrollEffect;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["C:/Users/tak43/remaking/node_modules/@enact/sandstone/useScroll/useOverscrollEffect.js"],"names":["Object","defineProperty","exports","value","useOverscrollEffect","_util","require","_resolution","_interopRequireDefault","_useScroll","_react","obj","__esModule","overscrollTypeDone","constants","overscrollTypeHold","overscrollTypeNone","overscrollTypeOnce","overscrollTransitionPrefix","overscrollTranslatePrefix","overscrollTransitionStart","overscrollTransitionEnd","overscrollMaxTranslate","scale","overscrollTimeout","props","instances","scrollContainerHandle","scrollContentRef","mutableRef","useRef","overscrollJobs","horizontal","before","after","vertical","applyOverscrollEffect","useCallback","orientation","edge","type","ratio","isHorizontal","current","effectSize","rtl","translate","concat","transition","style","setProperty","start","useEffect","createOverscrollJob","Job","stopOverscrollJob","job","stop","clearOverscrollEffect","startAfter","setOverscrollStatus","checkAndApplyOverscrollEffectByDirection","direction","bounds","getScrollBounds","scrollability","canScrollVertically","canScrollHorizontally","isRtl","checkAndApplyOverscrollEffect","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useOverscrollEffect = exports[\"default\"] = void 0;\n\nvar _util = require(\"@enact/core/util\");\n\nvar _resolution = _interopRequireDefault(require(\"@enact/ui/resolution\"));\n\nvar _useScroll = require(\"@enact/ui/useScroll\");\n\nvar _react = require(\"react\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar overscrollTypeDone = _useScroll.constants.overscrollTypeDone,\n    overscrollTypeHold = _useScroll.constants.overscrollTypeHold,\n    overscrollTypeNone = _useScroll.constants.overscrollTypeNone,\n    overscrollTypeOnce = _useScroll.constants.overscrollTypeOnce,\n    overscrollTransitionPrefix = '--scroll-overscroll-transition-',\n    overscrollTranslatePrefix = '--scroll-overscroll-translate-',\n    overscrollTransitionStart = 'transform 300ms cubic-bezier(0.5, 1, 0.89, 1)',\n    overscrollTransitionEnd = 'transform 500ms cubic-bezier(0.34, 1.56, 0.64, 1)',\n    overscrollMaxTranslate = _resolution[\"default\"].scale(180),\n    overscrollTimeout = 220;\n\nvar useOverscrollEffect = function useOverscrollEffect(props, instances) {\n  var scrollContainerHandle = instances.scrollContainerHandle,\n      scrollContentRef = instances.scrollContentRef; // Mutable value\n\n  var mutableRef = (0, _react.useRef)({\n    overscrollJobs: {\n      horizontal: {\n        before: null,\n        after: null\n      },\n      vertical: {\n        before: null,\n        after: null\n      }\n    }\n  }); // Hooks\n\n  var applyOverscrollEffect = (0, _react.useCallback)(function (orientation, edge, type, ratio) {\n    var isHorizontal = orientation === 'horizontal';\n\n    if (type !== overscrollTypeHold && scrollContentRef.current) {\n      var effectSize = ratio * (edge === 'before' ? 1 : -1) * (isHorizontal && scrollContainerHandle.current.rtl ? -1 : 1) * overscrollMaxTranslate,\n          translate = \"translate\".concat(isHorizontal ? 'X' : 'Y', \"(\").concat(effectSize, \"px)\"),\n          transition = ratio !== 0 ? overscrollTransitionStart : overscrollTransitionEnd;\n      scrollContentRef.current.style.setProperty(overscrollTranslatePrefix + orientation, translate);\n      scrollContentRef.current.style.setProperty(overscrollTransitionPrefix + orientation, transition);\n\n      if (type === overscrollTypeOnce) {\n        mutableRef.current.overscrollJobs[orientation][edge].start(orientation, edge, overscrollTypeDone, 0);\n      }\n    }\n  }, [scrollContainerHandle, scrollContentRef]);\n  (0, _react.useEffect)(function () {\n    function createOverscrollJob(orientation, edge) {\n      if (!mutableRef.current.overscrollJobs[orientation][edge]) {\n        mutableRef.current.overscrollJobs[orientation][edge] = new _util.Job(applyOverscrollEffect, overscrollTimeout);\n      }\n    }\n\n    function stopOverscrollJob(orientation, edge) {\n      var job = mutableRef.current.overscrollJobs[orientation][edge];\n\n      if (job) {\n        job.stop();\n      }\n    }\n\n    createOverscrollJob('horizontal', 'before');\n    createOverscrollJob('horizontal', 'after');\n    createOverscrollJob('vertical', 'before');\n    createOverscrollJob('vertical', 'after');\n    return function () {\n      stopOverscrollJob('horizontal', 'before');\n      stopOverscrollJob('horizontal', 'after');\n      stopOverscrollJob('vertical', 'before');\n      stopOverscrollJob('vertical', 'after');\n    };\n  }, [applyOverscrollEffect]); // Functions\n\n  function clearOverscrollEffect(orientation, edge) {\n    mutableRef.current.overscrollJobs[orientation][edge].startAfter(overscrollTimeout, orientation, edge, overscrollTypeNone, 0);\n    scrollContainerHandle.current.setOverscrollStatus(orientation, edge, overscrollTypeNone, 0);\n  }\n\n  function checkAndApplyOverscrollEffectByDirection(direction) {\n    var orientation = direction === 'up' || direction === 'down' ? 'vertical' : 'horizontal',\n        bounds = scrollContainerHandle.current.getScrollBounds(),\n        scrollability = orientation === 'vertical' ? scrollContainerHandle.current.canScrollVertically(bounds) : scrollContainerHandle.current.canScrollHorizontally(bounds);\n\n    if (scrollability) {\n      var isRtl = scrollContainerHandle.current.rtl,\n          edge = direction === 'up' || !isRtl && direction === 'left' || isRtl && direction === 'right' ? 'before' : 'after';\n      scrollContainerHandle.current.checkAndApplyOverscrollEffect(orientation, edge, overscrollTypeOnce);\n    }\n  } // Return\n\n\n  return {\n    applyOverscrollEffect: applyOverscrollEffect,\n    checkAndApplyOverscrollEffectByDirection: checkAndApplyOverscrollEffectByDirection,\n    clearOverscrollEffect: clearOverscrollEffect\n  };\n};\n\nexports.useOverscrollEffect = useOverscrollEffect;\nvar _default = useOverscrollEffect;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"module"}