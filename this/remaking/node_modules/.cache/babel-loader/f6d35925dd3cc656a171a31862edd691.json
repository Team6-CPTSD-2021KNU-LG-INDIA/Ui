{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useEventWheel = exports.useEventVoice = exports.useEventTouch = exports.useEventMouse = exports.useEventMonitor = exports.useEventKey = exports.useEventFocus = void 0;\n\nvar _handle = require(\"@enact/core/handle\");\n\nvar _platform = _interopRequireDefault(require(\"@enact/core/platform\"));\n\nvar _snapshot = require(\"@enact/core/snapshot\");\n\nvar _util = require(\"@enact/core/util\");\n\nvar _spotlight = _interopRequireWildcard(require(\"@enact/spotlight\"));\n\nvar _utils = require(\"@enact/spotlight/src/utils\");\n\nvar _target = require(\"@enact/spotlight/src/target\");\n\nvar _useScroll = require(\"@enact/ui/useScroll\");\n\nvar _utilEvent = _interopRequireDefault(require(\"@enact/ui/useScroll/utilEvent\"));\n\nvar _utilDOM = _interopRequireDefault(require(\"@enact/ui/useScroll/utilDOM\"));\n\nvar _react = require(\"react\");\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]);\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e2) {\n          throw _e2;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e3) {\n      didErr = true;\n      err = _e3;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nvar animationDuration = _useScroll.constants.animationDuration,\n    epsilon = _useScroll.constants.epsilon,\n    isPageDown = _useScroll.constants.isPageDown,\n    isPageUp = _useScroll.constants.isPageUp,\n    overscrollTypeOnce = _useScroll.constants.overscrollTypeOnce,\n    paginationPageMultiplier = _useScroll.constants.paginationPageMultiplier,\n    scrollWheelPageMultiplierForMaxPixel = _useScroll.constants.scrollWheelPageMultiplierForMaxPixel;\nvar lastPointer = {\n  x: 0,\n  y: 0\n};\n\nvar useEventFocus = function useEventFocus(props, instances) {\n  var scrollMode = props.scrollMode;\n  var scrollContainerHandle = instances.scrollContainerHandle,\n      scrollContainerRef = instances.scrollContainerRef,\n      scrollContentRef = instances.scrollContentRef,\n      spottable = instances.spottable,\n      themeScrollContentHandle = instances.themeScrollContentHandle; // Functions\n\n  var startScrollOnFocus = function startScrollOnFocus(pos) {\n    if (pos) {\n      var top = pos.top,\n          left = pos.left,\n          bounds = scrollContainerHandle.current.getScrollBounds();\n\n      if (scrollMode === 'translate') {\n        var scrollHorizontally = bounds.maxLeft > 0 && left !== scrollContainerHandle.current.scrollLeft,\n            scrollVertically = bounds.maxTop > 0 && top !== scrollContainerHandle.current.scrollTop;\n\n        if (scrollHorizontally || scrollVertically) {\n          scrollContainerHandle.current.start({\n            targetX: left,\n            targetY: top,\n            animate: animationDuration > 0 && spottable.current.animateOnFocus,\n            overscrollEffect: props.overscrollEffectOn[scrollContainerHandle.current.lastInputType] && (!themeScrollContentHandle.current.shouldPreventOverscrollEffect || !themeScrollContentHandle.current.shouldPreventOverscrollEffect())\n          });\n          spottable.current.lastScrollPositionOnFocus = pos;\n        }\n      } else {\n        var _scrollHorizontally = bounds.maxLeft > 0 && Math.abs(left - scrollContainerHandle.current.scrollLeft) > epsilon,\n            _scrollVertically = bounds.maxTop > 0 && Math.abs(top - scrollContainerHandle.current.scrollTop) > epsilon;\n\n        if (_scrollHorizontally || _scrollVertically) {\n          scrollContainerHandle.current.start({\n            targetX: left,\n            targetY: top,\n            animate: spottable.current.animateOnFocus,\n            overscrollEffect: props.overscrollEffectOn[scrollContainerHandle.current.lastInputType] && (!themeScrollContentHandle.current.shouldPreventOverscrollEffect || !themeScrollContentHandle.current.shouldPreventOverscrollEffect())\n          });\n          spottable.current.lastScrollPositionOnFocus = pos;\n        }\n      }\n    }\n  };\n\n  function calculateAndScrollTo() {\n    var positionFn = themeScrollContentHandle.current.calculatePositionOnFocus,\n        scrollContentNode = scrollContentRef.current,\n        spotItem = _spotlight[\"default\"].getCurrent();\n\n    if (spotItem && positionFn && _utilDOM[\"default\"].containsDangerously(scrollContentNode, spotItem)) {\n      var lastPos = spottable.current.lastScrollPositionOnFocus;\n      var pos; // If scroll animation is ongoing, we need to pass last target position to\n      // determine correct scroll position.\n\n      if (lastPos & (scrollMode === 'translate' && scrollContainerHandle.current.animator.isAnimating() || scrollMode === 'native' && scrollContainerHandle.current.scrolling)) {\n        var contentRect = (0, _utils.getRect)(scrollContentNode),\n            itemRect = (0, _utils.getRect)(spotItem);\n        var scrollPosition;\n\n        if (props.direction === 'horizontal' || props.direction === 'both' && !(itemRect.left >= contentRect.left && itemRect.right <= contentRect.right)) {\n          scrollPosition = lastPos.left;\n        } else if (props.direction === 'vertical' || props.direction === 'both' && !(itemRect.top >= contentRect.top && itemRect.bottom <= contentRect.bottom)) {\n          scrollPosition = lastPos.top;\n        }\n\n        pos = positionFn({\n          item: spotItem,\n          scrollPosition: scrollPosition\n        });\n      } else {\n        pos = positionFn({\n          item: spotItem\n        });\n      }\n\n      if (pos && (pos.left !== scrollContainerHandle.current.scrollLeft || pos.top !== scrollContainerHandle.current.scrollTop)) {\n        startScrollOnFocus(pos);\n      } // update `scrollHeight`\n\n\n      scrollContainerHandle.current.bounds.scrollHeight = scrollContainerHandle.current.getScrollBounds().scrollHeight;\n    }\n  }\n\n  function handleFocus(ev) {\n    var shouldPreventScrollByFocus = themeScrollContentHandle.current.shouldPreventScrollByFocus ? themeScrollContentHandle.current.shouldPreventScrollByFocus() : false;\n\n    if (spottable.current.isWheeling) {\n      scrollContainerHandle.current.stop();\n\n      if (scrollMode === 'translate') {\n        spottable.current.animateOnFocus = false;\n      }\n    }\n\n    if (!(shouldPreventScrollByFocus || _spotlight[\"default\"].getPointerMode() || scrollContainerHandle.current.isDragging || spottable.current.indexToFocus)) {\n      var item = ev.target,\n          spotItem = _spotlight[\"default\"].getCurrent();\n\n      if (item && item === spotItem) {\n        calculateAndScrollTo();\n      }\n    } else if (themeScrollContentHandle.current.setLastFocusedNode) {\n      themeScrollContentHandle.current.setLastFocusedNode(ev.target);\n    }\n  }\n\n  function hasFocus() {\n    var current = _spotlight[\"default\"].getCurrent();\n\n    if (current && scrollContainerRef.current) {\n      return _utilDOM[\"default\"].containsDangerously(scrollContainerRef, current);\n    }\n  } // Return\n\n\n  return {\n    calculateAndScrollTo: calculateAndScrollTo,\n    handleFocus: handleFocus,\n    hasFocus: hasFocus\n  };\n};\n\nexports.useEventFocus = useEventFocus;\n\nvar useEventKey = function useEventKey(props, instances, context) {\n  var scrollMode = props.scrollMode;\n  var themeScrollContentHandle = instances.themeScrollContentHandle,\n      spottable = instances.spottable,\n      scrollContentRef = instances.scrollContentRef,\n      scrollContainerHandle = instances.scrollContainerHandle;\n  var checkAndApplyOverscrollEffectByDirection = context.checkAndApplyOverscrollEffectByDirection,\n      hasFocus = context.hasFocus,\n      isContent = context.isContent; // Functions\n\n  function handleKeyDown(ev) {\n    var keyCode = ev.keyCode,\n        repeat = ev.repeat,\n        target = ev.target;\n    (0, _handle.forward)('onKeyDown', ev, props);\n\n    if (isPageUp(keyCode) || isPageDown(keyCode)) {\n      ev.preventDefault();\n    }\n\n    spottable.current.animateOnFocus = true;\n\n    if (!repeat && hasFocus()) {\n      var direction = null;\n\n      if (isPageUp(keyCode) || isPageDown(keyCode)) {\n        if (props.direction === 'vertical' || props.direction === 'both') {\n          direction = isPageUp(keyCode) ? 'up' : 'down';\n\n          if (isContent(target)) {\n            ev.stopPropagation();\n            scrollByPage(direction);\n          }\n\n          if (props.overscrollEffectOn.pageKey) {\n            checkAndApplyOverscrollEffectByDirection(direction);\n          }\n        }\n      } else if ((0, _spotlight.getDirection)(keyCode) && (scrollMode === 'translate' || scrollMode === 'native' && !_spotlight[\"default\"].getPointerMode())) {\n        var element = _spotlight[\"default\"].getCurrent();\n\n        scrollContainerHandle.current.lastInputType = 'arrowKey';\n        direction = (0, _spotlight.getDirection)(keyCode);\n\n        if (props.overscrollEffectOn.arrowKey && !(element ? (0, _target.getTargetByDirectionFromElement)(direction, element) : null)) {\n          checkAndApplyOverscrollEffectByDirection(direction);\n        }\n      }\n    }\n  }\n\n  function scrollByPage(pageKeyDirection) {\n    var scrollTop = scrollContainerHandle.current.scrollTop,\n        focusedItem = _spotlight[\"default\"].getCurrent(),\n        bounds = scrollContainerHandle.current.getScrollBounds(),\n        isUp = pageKeyDirection === 'up',\n        directionFactor = isUp ? -1 : 1,\n        pageDistance = directionFactor * bounds.clientHeight * paginationPageMultiplier;\n\n    var direction = pageKeyDirection;\n    var scrollPossible = false;\n\n    if (scrollMode === 'translate') {\n      scrollPossible = isUp ? scrollTop > 0 : bounds.maxTop > scrollTop;\n    } else {\n      scrollPossible = isUp ? scrollTop > 0 : bounds.maxTop - scrollTop > epsilon;\n    }\n\n    scrollContainerHandle.current.lastInputType = 'pageKey';\n\n    if (directionFactor !== scrollContainerHandle.current.wheelDirection) {\n      scrollContainerHandle.current.isScrollAnimationTargetAccumulated = false;\n      scrollContainerHandle.current.wheelDirection = directionFactor;\n    }\n\n    if (scrollPossible) {\n      if (focusedItem) {\n        var contentNode = scrollContentRef.current; // Should do nothing when focusedItem is paging control button of Scrollbar\n\n        if (_utilDOM[\"default\"].containsDangerously(contentNode, focusedItem)) {\n          var contentRect = contentNode.getBoundingClientRect(),\n              clientRect = focusedItem.getBoundingClientRect(),\n              yAdjust = isUp ? 1 : -1,\n              x = (0, _util.clamp)(contentRect.left, contentRect.right, (clientRect.right + clientRect.left) / 2);\n          var y = 0;\n\n          if (bounds.maxTop - epsilon < scrollTop + pageDistance || epsilon > scrollTop + pageDistance) {\n            y = contentRect[isUp ? 'top' : 'bottom'] + yAdjust;\n            direction = isUp ? 'down' : 'up'; // Change direction to find target in the content\n          } else {\n            y = (0, _util.clamp)(contentRect.top, contentRect.bottom, (clientRect.bottom + clientRect.top) / 2);\n          }\n\n          focusedItem.blur();\n\n          if (!props['data-spotlight-container-disabled']) {\n            themeScrollContentHandle.current.setContainerDisabled(true);\n          }\n\n          if (themeScrollContentHandle.current.pauseSpotlight) {\n            themeScrollContentHandle.current.pauseSpotlight(true);\n          }\n\n          spottable.current.pointToFocus = {\n            direction: direction,\n            x: x,\n            y: y\n          };\n        }\n      } else {\n        spottable.current.pointToFocus = {\n          direction: direction,\n          x: lastPointer.x,\n          y: lastPointer.y\n        };\n      }\n\n      scrollContainerHandle.current.scrollToAccumulatedTarget(pageDistance, true, props.overscrollEffectOn.pageKey);\n    }\n  }\n\n  function scrollByPageOnPointerMode(ev) {\n    var keyCode = ev.keyCode,\n        repeat = ev.repeat;\n    (0, _handle.forward)('onKeyDown', ev, props);\n    ev.preventDefault();\n    spottable.current.animateOnFocus = true;\n\n    if (!repeat && (props.direction === 'vertical' || props.direction === 'both')) {\n      var direction = isPageUp(keyCode) ? 'up' : 'down';\n      scrollByPage(direction);\n\n      if (props.overscrollEffectOn.pageKey) {\n        /* if the spotlight focus will not move */\n        checkAndApplyOverscrollEffectByDirection(direction);\n      }\n\n      return true; // means consumed\n    }\n\n    return false; // means to be propagated\n  } // Return\n\n\n  return {\n    handleKeyDown: handleKeyDown,\n    lastPointer: lastPointer,\n    scrollByPageOnPointerMode: scrollByPageOnPointerMode\n  };\n};\n/*\n * Track the last position of the pointer to check if a list should scroll by\n * page up/down keys when the pointer is on a list without any focused node.\n * `keydown` event does not occur if there is no focus on the node and\n * its descendants, we add `keydown` handler to `document` also.\n */\n\n\nexports.useEventKey = useEventKey;\nvar scrollers = new Map(); // An app could have lists and/or scrollers more than one,\n// so we should test all of them when page up/down key is pressed.\n\nvar pointerTracker = function pointerTracker(ev) {\n  lastPointer.x = ev.clientX;\n  lastPointer.y = ev.clientY;\n};\n\nvar pageKeyHandler = function pageKeyHandler(ev) {\n  var keyCode = ev.keyCode;\n\n  if (_spotlight[\"default\"].getPointerMode() && !_spotlight[\"default\"].getCurrent() && (isPageUp(keyCode) || isPageDown(keyCode))) {\n    var _lastPointer = lastPointer,\n        x = _lastPointer.x,\n        y = _lastPointer.y,\n        elem = document.elementFromPoint(x, y);\n\n    if (elem) {\n      var _iterator = _createForOfIteratorHelper(scrollers),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              key = _step$value[0],\n              value = _step$value[1];\n\n          if (_utilDOM[\"default\"].containsDangerously(value, elem)) {\n            /* To handle page keys in nested scrollable components,\n             * break the loop only when `scrollByPageOnPointerMode` returns `true`.\n             * This approach assumes that an inner scrollable component is\n             * mounted earlier than an outer scrollable component.\n             */\n            if (key.scrollByPageOnPointerMode(ev)) {\n              break;\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }\n};\n\nvar useEventMonitor = function useEventMonitor(props, instances, context) {\n  var scrollContainerRef = instances.scrollContainerRef;\n  var lastPointerProp = context.lastPointer,\n      scrollByPageOnPointerMode = context.scrollByPageOnPointerMode; // Mutable value\n\n  var mutableRef = (0, _react.useRef)({\n    pageKeyHandlerObj: {\n      scrollByPageOnPointerMode: scrollByPageOnPointerMode\n    }\n  });\n  lastPointer = lastPointerProp; // Hooks\n\n  (0, _react.useEffect)(function () {\n    var setMonitorEventTarget = function setMonitorEventTarget(target) {\n      scrollers.set(mutableRef.current.pageKeyHandlerObj, target);\n    };\n\n    var deleteMonitorEventTarget = function deleteMonitorEventTarget() {\n      scrollers[\"delete\"](mutableRef.current.pageKeyHandlerObj);\n    };\n\n    setMonitorEventTarget(scrollContainerRef.current);\n    return function () {\n      // TODO: Replace `this` to something.\n      deleteMonitorEventTarget();\n    };\n  }, [scrollContainerRef]);\n};\n\nexports.useEventMonitor = useEventMonitor;\n(0, _snapshot.onWindowReady)(function () {\n  (0, _utilEvent[\"default\"])('mousemove').addEventListener(document, pointerTracker);\n  (0, _utilEvent[\"default\"])('keydown').addEventListener(document, pageKeyHandler);\n});\n\nvar useEventMouse = function useEventMouse(props, instances) {\n  var scrollMode = props.scrollMode;\n  var themeScrollContentHandle = instances.themeScrollContentHandle,\n      scrollContainerHandle = instances.scrollContainerHandle; // Functions\n\n  function handleFlick(_ref) {\n    var direction = _ref.direction;\n\n    var _scrollContainerHandl = scrollContainerHandle.current,\n        canScrollHorizontally = _scrollContainerHandl.canScrollHorizontally,\n        canScrollVertically = _scrollContainerHandl.canScrollVertically,\n        bounds = scrollContainerHandle.current.getScrollBounds(),\n        focusedItem = _spotlight[\"default\"].getCurrent();\n\n    if (focusedItem) {\n      focusedItem.blur();\n    }\n\n    if ((direction === 'vertical' && canScrollVertically(bounds) || direction === 'horizontal' && canScrollHorizontally(bounds)) && !props['data-spotlight-container-disabled']) {\n      themeScrollContentHandle.current.setContainerDisabled(true);\n    }\n  }\n\n  function handleMouseDown(ev) {\n    if (props['data-spotlight-container-disabled']) {\n      ev.preventDefault();\n    } else if (scrollMode === 'native') {\n      themeScrollContentHandle.current.setContainerDisabled(false);\n    }\n  } // Return\n\n\n  return {\n    handleFlick: handleFlick,\n    handleMouseDown: handleMouseDown\n  };\n};\n\nexports.useEventMouse = useEventMouse;\n\nvar useEventTouch = function useEventTouch() {\n  // Functions\n  function handleTouchStart() {\n    var focusedItem = _spotlight[\"default\"].getCurrent();\n\n    if (!_spotlight[\"default\"].isPaused() && focusedItem) {\n      focusedItem.blur();\n    }\n  } // Return\n\n\n  return {\n    handleTouchStart: handleTouchStart\n  };\n};\n\nexports.useEventTouch = useEventTouch;\n\nvar useEventVoice = function useEventVoice(props, instances) {\n  var scrollContainerRef = instances.scrollContainerRef,\n      scrollContainerHandle = instances.scrollContainerHandle; // Mutable value\n\n  var mutableRef = (0, _react.useRef)({\n    isVoiceControl: false,\n    voiceControlDirection: 'vertical'\n  }); // Functions\n\n  var updateFocusAfterVoiceControl = function updateFocusAfterVoiceControl() {\n    var spotItem = _spotlight[\"default\"].getCurrent(),\n        scrollContainerNode = scrollContainerRef.current;\n\n    if (_utilDOM[\"default\"].containsDangerously(scrollContainerNode, spotItem)) {\n      var viewportBounds = scrollContainerNode.getBoundingClientRect(),\n          spotItemBounds = spotItem.getBoundingClientRect(),\n          nodes = _spotlight[\"default\"].getSpottableDescendants(scrollContainerNode.dataset.spotlightId),\n          first = mutableRef.current.voiceControlDirection === 'vertical' ? 'top' : 'left',\n          last = mutableRef.current.voiceControlDirection === 'vertical' ? 'bottom' : 'right';\n\n      if (spotItemBounds[last] < viewportBounds[first] || spotItemBounds[first] > viewportBounds[last]) {\n        for (var i = 0; i < nodes.length; i++) {\n          var nodeBounds = nodes[i].getBoundingClientRect();\n\n          if (nodeBounds[first] > viewportBounds[first] && nodeBounds[last] < viewportBounds[last]) {\n            _spotlight[\"default\"].focus(nodes[i]);\n\n            break;\n          }\n        }\n      }\n    }\n  };\n\n  function stopVoice() {\n    if (mutableRef.current.isVoiceControl) {\n      mutableRef.current.isVoiceControl = false;\n      updateFocusAfterVoiceControl();\n    }\n  }\n\n  var isReachedEdge = function isReachedEdge(scrollPos, ltrBound, rtlBound) {\n    var isRtl = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    var bound = isRtl ? rtlBound : ltrBound;\n    return bound === 0 && scrollPos === 0 || bound > 0 && scrollPos >= bound - 1;\n  };\n\n  var handleVoice = function handleVoice(e) {\n    var isHorizontal = props.direction === 'horizontal',\n        isRtl = scrollContainerHandle.current.rtl,\n        _scrollContainerHandl2 = scrollContainerHandle.current,\n        scrollTop = _scrollContainerHandl2.scrollTop,\n        scrollLeft = _scrollContainerHandl2.scrollLeft,\n        _scrollContainerHandl3 = scrollContainerHandle.current.getScrollBounds(),\n        maxLeft = _scrollContainerHandl3.maxLeft,\n        maxTop = _scrollContainerHandl3.maxTop,\n        verticalDirection = ['up', 'down', 'top', 'bottom'],\n        horizontalDirection = isRtl ? ['right', 'left', 'rightmost', 'leftmost'] : ['left', 'right', 'leftmost', 'rightmost'],\n        movement = ['previous', 'next', 'first', 'last'];\n\n    var scroll = e && e.detail && e.detail.scroll,\n        index = movement.indexOf(scroll);\n\n    if (index > -1) {\n      scroll = isHorizontal ? horizontalDirection[index] : verticalDirection[index];\n    }\n\n    mutableRef.current.voiceControlDirection = verticalDirection.includes(scroll) && 'vertical' || horizontalDirection.includes(scroll) && 'horizontal' || null; // Case 1. Invalid direction\n\n    if (mutableRef.current.voiceControlDirection === null) {\n      mutableRef.current.isVoiceControl = false; // Case 2. Cannot scroll\n    } else if (['up', 'top'].includes(scroll) && isReachedEdge(scrollTop, 0) || ['down', 'bottom'].includes(scroll) && isReachedEdge(scrollTop, maxTop) || ['left', 'leftmost'].includes(scroll) && isReachedEdge(scrollLeft, 0, maxLeft, isRtl) || ['right', 'rightmost'].includes(scroll) && isReachedEdge(scrollLeft, maxLeft, 0, isRtl)) {\n      if (window.webOSVoiceReportActionResult) {\n        window.webOSVoiceReportActionResult({\n          voiceUi: {\n            exception: 'alreadyCompleted'\n          }\n        });\n        e.preventDefault();\n      } // Case 3. Can scroll\n\n    } else {\n      mutableRef.current.isVoiceControl = true;\n\n      if (['up', 'down', 'left', 'right'].includes(scroll)) {\n        var bounds = scrollContainerHandle.current.getScrollBounds(),\n            directionFactor = scroll === 'up' || scroll === 'left' && !isRtl || scroll === 'right' && isRtl,\n            scrollVertically = verticalDirection.includes(scroll),\n            direction = directionFactor ? -1 : 1,\n            pageDistance = direction * (scrollVertically ? bounds.clientHeight : bounds.clientWidth) * paginationPageMultiplier;\n        scrollContainerHandle.current.lastInputType = 'pageKey';\n\n        if (direction !== scrollContainerHandle.current.wheelDirection) {\n          scrollContainerHandle.current.isScrollAnimationTargetAccumulated = false;\n          scrollContainerHandle.current.wheelDirection = direction;\n        }\n\n        scrollContainerHandle.current.scrollToAccumulatedTarget(pageDistance, scrollVertically, props.overscrollEffectOn.pageKey);\n      } else {\n        // ['top', 'bottom', 'leftmost', 'rightmost'].includes(scroll)\n        scrollContainerHandle.current.scrollTo({\n          align: verticalDirection.includes(scroll) && scroll || (scroll === 'leftmost' && isRtl || scroll === 'rightmost' && !isRtl) && 'right' || 'left'\n        });\n      }\n\n      e.preventDefault();\n    }\n  };\n\n  function addVoiceEventListener(scrollContentRef) {\n    if (_platform[\"default\"].webos) {\n      (0, _utilEvent[\"default\"])('webOSVoice').addEventListener(scrollContentRef, handleVoice);\n\n      if (scrollContainerHandle && scrollContainerHandle.current && scrollContainerHandle.current.getScrollBounds) {\n        var bounds = scrollContainerHandle.current.getScrollBounds();\n\n        if (scrollContainerHandle.current.canScrollVertically(bounds) || scrollContainerHandle.current.canScrollHorizontally(bounds)) {\n          scrollContentRef.current.setAttribute('data-webos-voice-intent', 'Scroll');\n        }\n      }\n    }\n  }\n\n  function removeVoiceEventListener(scrollContentRef) {\n    if (_platform[\"default\"].webos) {\n      (0, _utilEvent[\"default\"])('webOSVoice').removeEventListener(scrollContentRef, handleVoice);\n      scrollContentRef.current.removeAttribute('data-webos-voice-intent');\n    }\n  } // Return\n\n\n  return {\n    addVoiceEventListener: addVoiceEventListener,\n    removeVoiceEventListener: removeVoiceEventListener,\n    stopVoice: stopVoice\n  };\n};\n\nexports.useEventVoice = useEventVoice;\n\nvar useEventWheel = function useEventWheel(props, instances) {\n  var dataSize = props.dataSize,\n      scrollMode = props.scrollMode,\n      snapToCenter = props.snapToCenter;\n  var themeScrollContentHandle = instances.themeScrollContentHandle,\n      scrollContainerHandle = instances.scrollContainerHandle,\n      scrollContentHandle = instances.scrollContentHandle,\n      scrollContentRef = instances.scrollContentRef,\n      spottable = instances.spottable; // Functions\n\n  function initializeWheeling() {\n    if (!props['data-spotlight-container-disabled']) {\n      themeScrollContentHandle.current.setContainerDisabled(true);\n    }\n\n    spottable.current.isWheeling = true;\n  }\n\n  function handleWheel(_ref2) {\n    var delta = _ref2.delta;\n\n    var focusedItem = _spotlight[\"default\"].getCurrent();\n\n    if (focusedItem) {\n      focusedItem.blur();\n    }\n\n    if (delta !== 0) {\n      initializeWheeling();\n    }\n  }\n  /*\n   * wheel event handler;\n   * - for horizontal scroll, supports wheel action on any children nodes since web engine cannot support this\n   * - for vertical scroll, supports wheel action on scrollbars only\n   */\n\n\n  function handleWheelNative(ev) {\n    var overscrollEffectRequired = props.overscrollEffectOn.wheel;\n    var bounds = scrollContainerHandle.current.getScrollBounds();\n    var canScrollHorizontally = scrollContainerHandle.current.canScrollHorizontally(bounds);\n    var canScrollVertically = scrollContainerHandle.current.canScrollVertically(bounds);\n    var eventDeltaMode = ev.deltaMode;\n    var eventDelta = -ev.wheelDeltaY || ev.deltaY;\n    var positiveDelta = eventDelta > 0;\n    var negativeDelta = eventDelta < 0;\n    var _scrollContainerHandl4 = scrollContainerHandle.current,\n        scrollTop = _scrollContainerHandl4.scrollTop,\n        scrollLeft = _scrollContainerHandl4.scrollLeft;\n    var offset = snapToCenter ? scrollContentHandle.current.primary.gridSize : 0;\n    var delta = 0;\n    var needToHideScrollbarTrack = false;\n\n    if (typeof window !== 'undefined') {\n      window.document.activeElement.blur();\n    }\n\n    scrollContainerHandle.current.showScrollbarTrack(bounds); // FIXME This routine is a temporary support for horizontal wheel scroll.\n    // FIXME If web engine supports horizontal wheel, this routine should be refined or removed.\n\n    if (canScrollVertically) {\n      // This routine handles wheel events on scrollbars for vertical scroll.\n      if (negativeDelta && scrollTop > 0 + offset || positiveDelta && scrollTop < bounds.maxTop - offset) {\n        if (!spottable.current.isWheeling) {\n          initializeWheeling();\n        } // If ev.target is a descendant of scrollContent, the event will be handled on scroll event handler.\n\n\n        if (!_utilDOM[\"default\"].containsDangerously(scrollContentRef.current, ev.target) || snapToCenter) {\n          delta = scrollContainerHandle.current.calculateDistanceByWheel(eventDeltaMode, eventDelta, bounds.clientHeight * scrollWheelPageMultiplierForMaxPixel);\n          needToHideScrollbarTrack = !delta;\n          ev.preventDefault();\n        } else if (overscrollEffectRequired) {\n          scrollContainerHandle.current.checkAndApplyOverscrollEffect('vertical', positiveDelta ? 'after' : 'before', overscrollTypeOnce);\n        }\n\n        ev.stopPropagation();\n      } else {\n        if (overscrollEffectRequired && (negativeDelta && scrollTop <= 0 || positiveDelta && scrollTop >= bounds.maxTop)) {\n          scrollContainerHandle.current.applyOverscrollEffect('vertical', positiveDelta ? 'after' : 'before', overscrollTypeOnce);\n        }\n\n        needToHideScrollbarTrack = true;\n      }\n    } else if (canScrollHorizontally) {\n      // this routine handles wheel events on any children for horizontal scroll.\n      if (negativeDelta && scrollLeft > 0 + offset || positiveDelta && scrollLeft < bounds.maxLeft - offset) {\n        if (!spottable.current.isWheeling) {\n          initializeWheeling();\n        }\n\n        delta = scrollContainerHandle.current.calculateDistanceByWheel(eventDeltaMode, eventDelta, bounds.clientWidth * scrollWheelPageMultiplierForMaxPixel);\n        needToHideScrollbarTrack = !delta;\n        ev.preventDefault();\n        ev.stopPropagation();\n      } else {\n        if (overscrollEffectRequired && (negativeDelta && scrollLeft <= 0 || positiveDelta && scrollLeft >= bounds.maxLeft)) {\n          scrollContainerHandle.current.applyOverscrollEffect('horizontal', positiveDelta ? 'after' : 'before', overscrollTypeOnce);\n        }\n\n        needToHideScrollbarTrack = true;\n      }\n    }\n\n    if (delta !== 0) {\n      /* prevent native scrolling feature for vertical direction */\n      ev.preventDefault();\n      var direction = Math.sign(delta); // Not to accumulate scroll position if wheel direction is different from hold direction\n\n      if (direction !== scrollContainerHandle.current.wheelDirection) {\n        scrollContainerHandle.current.isScrollAnimationTargetAccumulated = false;\n        scrollContainerHandle.current.wheelDirection = direction;\n      }\n\n      if (!snapToCenter) {\n        scrollContainerHandle.current.scrollToAccumulatedTarget(delta, canScrollVertically, overscrollEffectRequired);\n      } else {\n        var dimensionToExtent = scrollContentHandle.current.dimensionToExtent;\n        var currentIndex = scrollContentHandle.current.getCenterItemIndexFromScrollPosition(canScrollVertically ? scrollTop : scrollLeft);\n        var nextIndex = currentIndex + direction * dimensionToExtent;\n\n        if (nextIndex > 0 && nextIndex < dataSize - 1) {\n          if (typeof document === 'object') {\n            var target = document.querySelector(\"[data-index=\\\"\".concat(nextIndex, \"\\\"] div\")); // remove effect\n\n            themeScrollContentHandle.current.removeScaleEffect(); // add effect\n\n            themeScrollContentHandle.current.addScaleEffect(target);\n          }\n\n          if (themeScrollContentHandle.current.resetSnapToCenterStatus) {\n            themeScrollContentHandle.current.resetSnapToCenterStatus();\n          }\n\n          scrollContainerHandle.current.scrollTo({\n            index: nextIndex,\n            stickTo: 'center'\n          });\n        }\n      }\n    }\n\n    if (needToHideScrollbarTrack) {\n      scrollContainerHandle.current.startHidingScrollbarTrack();\n    }\n  } // Return\n\n\n  return {\n    handleWheel: scrollMode === 'translate' ? handleWheel : handleWheelNative\n  };\n};\n\nexports.useEventWheel = useEventWheel;","map":{"version":3,"sources":["C:/Users/tak43/remaking/node_modules/@enact/sandstone/useScroll/useEvent.js"],"names":["Object","defineProperty","exports","value","useEventWheel","useEventVoice","useEventTouch","useEventMouse","useEventMonitor","useEventKey","useEventFocus","_handle","require","_platform","_interopRequireDefault","_snapshot","_util","_spotlight","_interopRequireWildcard","_utils","_target","_useScroll","_utilEvent","_utilDOM","_react","_getRequireWildcardCache","WeakMap","cache","obj","__esModule","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","_i","Symbol","iterator","_arr","_n","_d","_s","_e","next","done","push","length","err","Array","isArray","_createForOfIteratorHelper","o","allowArrayLike","it","F","s","n","e","_e2","f","normalCompletion","didErr","step","_e3","minLen","_arrayLikeToArray","toString","slice","constructor","name","from","test","len","arr2","animationDuration","constants","epsilon","isPageDown","isPageUp","overscrollTypeOnce","paginationPageMultiplier","scrollWheelPageMultiplierForMaxPixel","lastPointer","x","y","props","instances","scrollMode","scrollContainerHandle","scrollContainerRef","scrollContentRef","spottable","themeScrollContentHandle","startScrollOnFocus","pos","top","left","bounds","current","getScrollBounds","scrollHorizontally","maxLeft","scrollLeft","scrollVertically","maxTop","scrollTop","start","targetX","targetY","animate","animateOnFocus","overscrollEffect","overscrollEffectOn","lastInputType","shouldPreventOverscrollEffect","lastScrollPositionOnFocus","_scrollHorizontally","Math","abs","_scrollVertically","calculateAndScrollTo","positionFn","calculatePositionOnFocus","scrollContentNode","spotItem","getCurrent","containsDangerously","lastPos","animator","isAnimating","scrolling","contentRect","getRect","itemRect","scrollPosition","direction","right","bottom","item","scrollHeight","handleFocus","ev","shouldPreventScrollByFocus","isWheeling","stop","getPointerMode","isDragging","indexToFocus","target","setLastFocusedNode","hasFocus","context","checkAndApplyOverscrollEffectByDirection","isContent","handleKeyDown","keyCode","repeat","forward","preventDefault","stopPropagation","scrollByPage","pageKey","getDirection","element","arrowKey","getTargetByDirectionFromElement","pageKeyDirection","focusedItem","isUp","directionFactor","pageDistance","clientHeight","scrollPossible","wheelDirection","isScrollAnimationTargetAccumulated","contentNode","getBoundingClientRect","clientRect","yAdjust","clamp","blur","setContainerDisabled","pauseSpotlight","pointToFocus","scrollToAccumulatedTarget","scrollByPageOnPointerMode","scrollers","Map","pointerTracker","clientX","clientY","pageKeyHandler","_lastPointer","elem","document","elementFromPoint","_iterator","_step","_step$value","lastPointerProp","mutableRef","useRef","pageKeyHandlerObj","useEffect","setMonitorEventTarget","deleteMonitorEventTarget","onWindowReady","addEventListener","handleFlick","_ref","_scrollContainerHandl","canScrollHorizontally","canScrollVertically","handleMouseDown","handleTouchStart","isPaused","isVoiceControl","voiceControlDirection","updateFocusAfterVoiceControl","scrollContainerNode","viewportBounds","spotItemBounds","nodes","getSpottableDescendants","dataset","spotlightId","first","last","nodeBounds","focus","stopVoice","isReachedEdge","scrollPos","ltrBound","rtlBound","isRtl","arguments","undefined","bound","handleVoice","isHorizontal","rtl","_scrollContainerHandl2","_scrollContainerHandl3","verticalDirection","horizontalDirection","movement","scroll","detail","index","indexOf","includes","window","webOSVoiceReportActionResult","voiceUi","exception","clientWidth","scrollTo","align","addVoiceEventListener","webos","setAttribute","removeVoiceEventListener","removeEventListener","removeAttribute","dataSize","snapToCenter","scrollContentHandle","initializeWheeling","handleWheel","_ref2","delta","handleWheelNative","overscrollEffectRequired","wheel","eventDeltaMode","deltaMode","eventDelta","wheelDeltaY","deltaY","positiveDelta","negativeDelta","_scrollContainerHandl4","offset","primary","gridSize","needToHideScrollbarTrack","activeElement","showScrollbarTrack","calculateDistanceByWheel","checkAndApplyOverscrollEffect","applyOverscrollEffect","sign","dimensionToExtent","currentIndex","getCenterItemIndexFromScrollPosition","nextIndex","querySelector","concat","removeScaleEffect","addScaleEffect","resetSnapToCenterStatus","stickTo","startHidingScrollbarTrack"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useEventWheel = exports.useEventVoice = exports.useEventTouch = exports.useEventMouse = exports.useEventMonitor = exports.useEventKey = exports.useEventFocus = void 0;\n\nvar _handle = require(\"@enact/core/handle\");\n\nvar _platform = _interopRequireDefault(require(\"@enact/core/platform\"));\n\nvar _snapshot = require(\"@enact/core/snapshot\");\n\nvar _util = require(\"@enact/core/util\");\n\nvar _spotlight = _interopRequireWildcard(require(\"@enact/spotlight\"));\n\nvar _utils = require(\"@enact/spotlight/src/utils\");\n\nvar _target = require(\"@enact/spotlight/src/target\");\n\nvar _useScroll = require(\"@enact/ui/useScroll\");\n\nvar _utilEvent = _interopRequireDefault(require(\"@enact/ui/useScroll/utilEvent\"));\n\nvar _utilDOM = _interopRequireDefault(require(\"@enact/ui/useScroll/utilDOM\"));\n\nvar _react = require(\"react\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]); if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar animationDuration = _useScroll.constants.animationDuration,\n    epsilon = _useScroll.constants.epsilon,\n    isPageDown = _useScroll.constants.isPageDown,\n    isPageUp = _useScroll.constants.isPageUp,\n    overscrollTypeOnce = _useScroll.constants.overscrollTypeOnce,\n    paginationPageMultiplier = _useScroll.constants.paginationPageMultiplier,\n    scrollWheelPageMultiplierForMaxPixel = _useScroll.constants.scrollWheelPageMultiplierForMaxPixel;\nvar lastPointer = {\n  x: 0,\n  y: 0\n};\n\nvar useEventFocus = function useEventFocus(props, instances) {\n  var scrollMode = props.scrollMode;\n  var scrollContainerHandle = instances.scrollContainerHandle,\n      scrollContainerRef = instances.scrollContainerRef,\n      scrollContentRef = instances.scrollContentRef,\n      spottable = instances.spottable,\n      themeScrollContentHandle = instances.themeScrollContentHandle; // Functions\n\n  var startScrollOnFocus = function startScrollOnFocus(pos) {\n    if (pos) {\n      var top = pos.top,\n          left = pos.left,\n          bounds = scrollContainerHandle.current.getScrollBounds();\n\n      if (scrollMode === 'translate') {\n        var scrollHorizontally = bounds.maxLeft > 0 && left !== scrollContainerHandle.current.scrollLeft,\n            scrollVertically = bounds.maxTop > 0 && top !== scrollContainerHandle.current.scrollTop;\n\n        if (scrollHorizontally || scrollVertically) {\n          scrollContainerHandle.current.start({\n            targetX: left,\n            targetY: top,\n            animate: animationDuration > 0 && spottable.current.animateOnFocus,\n            overscrollEffect: props.overscrollEffectOn[scrollContainerHandle.current.lastInputType] && (!themeScrollContentHandle.current.shouldPreventOverscrollEffect || !themeScrollContentHandle.current.shouldPreventOverscrollEffect())\n          });\n          spottable.current.lastScrollPositionOnFocus = pos;\n        }\n      } else {\n        var _scrollHorizontally = bounds.maxLeft > 0 && Math.abs(left - scrollContainerHandle.current.scrollLeft) > epsilon,\n            _scrollVertically = bounds.maxTop > 0 && Math.abs(top - scrollContainerHandle.current.scrollTop) > epsilon;\n\n        if (_scrollHorizontally || _scrollVertically) {\n          scrollContainerHandle.current.start({\n            targetX: left,\n            targetY: top,\n            animate: spottable.current.animateOnFocus,\n            overscrollEffect: props.overscrollEffectOn[scrollContainerHandle.current.lastInputType] && (!themeScrollContentHandle.current.shouldPreventOverscrollEffect || !themeScrollContentHandle.current.shouldPreventOverscrollEffect())\n          });\n          spottable.current.lastScrollPositionOnFocus = pos;\n        }\n      }\n    }\n  };\n\n  function calculateAndScrollTo() {\n    var positionFn = themeScrollContentHandle.current.calculatePositionOnFocus,\n        scrollContentNode = scrollContentRef.current,\n        spotItem = _spotlight[\"default\"].getCurrent();\n\n    if (spotItem && positionFn && _utilDOM[\"default\"].containsDangerously(scrollContentNode, spotItem)) {\n      var lastPos = spottable.current.lastScrollPositionOnFocus;\n      var pos; // If scroll animation is ongoing, we need to pass last target position to\n      // determine correct scroll position.\n\n      if (lastPos & (scrollMode === 'translate' && scrollContainerHandle.current.animator.isAnimating() || scrollMode === 'native' && scrollContainerHandle.current.scrolling)) {\n        var contentRect = (0, _utils.getRect)(scrollContentNode),\n            itemRect = (0, _utils.getRect)(spotItem);\n        var scrollPosition;\n\n        if (props.direction === 'horizontal' || props.direction === 'both' && !(itemRect.left >= contentRect.left && itemRect.right <= contentRect.right)) {\n          scrollPosition = lastPos.left;\n        } else if (props.direction === 'vertical' || props.direction === 'both' && !(itemRect.top >= contentRect.top && itemRect.bottom <= contentRect.bottom)) {\n          scrollPosition = lastPos.top;\n        }\n\n        pos = positionFn({\n          item: spotItem,\n          scrollPosition: scrollPosition\n        });\n      } else {\n        pos = positionFn({\n          item: spotItem\n        });\n      }\n\n      if (pos && (pos.left !== scrollContainerHandle.current.scrollLeft || pos.top !== scrollContainerHandle.current.scrollTop)) {\n        startScrollOnFocus(pos);\n      } // update `scrollHeight`\n\n\n      scrollContainerHandle.current.bounds.scrollHeight = scrollContainerHandle.current.getScrollBounds().scrollHeight;\n    }\n  }\n\n  function handleFocus(ev) {\n    var shouldPreventScrollByFocus = themeScrollContentHandle.current.shouldPreventScrollByFocus ? themeScrollContentHandle.current.shouldPreventScrollByFocus() : false;\n\n    if (spottable.current.isWheeling) {\n      scrollContainerHandle.current.stop();\n\n      if (scrollMode === 'translate') {\n        spottable.current.animateOnFocus = false;\n      }\n    }\n\n    if (!(shouldPreventScrollByFocus || _spotlight[\"default\"].getPointerMode() || scrollContainerHandle.current.isDragging || spottable.current.indexToFocus)) {\n      var item = ev.target,\n          spotItem = _spotlight[\"default\"].getCurrent();\n\n      if (item && item === spotItem) {\n        calculateAndScrollTo();\n      }\n    } else if (themeScrollContentHandle.current.setLastFocusedNode) {\n      themeScrollContentHandle.current.setLastFocusedNode(ev.target);\n    }\n  }\n\n  function hasFocus() {\n    var current = _spotlight[\"default\"].getCurrent();\n\n    if (current && scrollContainerRef.current) {\n      return _utilDOM[\"default\"].containsDangerously(scrollContainerRef, current);\n    }\n  } // Return\n\n\n  return {\n    calculateAndScrollTo: calculateAndScrollTo,\n    handleFocus: handleFocus,\n    hasFocus: hasFocus\n  };\n};\n\nexports.useEventFocus = useEventFocus;\n\nvar useEventKey = function useEventKey(props, instances, context) {\n  var scrollMode = props.scrollMode;\n  var themeScrollContentHandle = instances.themeScrollContentHandle,\n      spottable = instances.spottable,\n      scrollContentRef = instances.scrollContentRef,\n      scrollContainerHandle = instances.scrollContainerHandle;\n  var checkAndApplyOverscrollEffectByDirection = context.checkAndApplyOverscrollEffectByDirection,\n      hasFocus = context.hasFocus,\n      isContent = context.isContent; // Functions\n\n  function handleKeyDown(ev) {\n    var keyCode = ev.keyCode,\n        repeat = ev.repeat,\n        target = ev.target;\n    (0, _handle.forward)('onKeyDown', ev, props);\n\n    if (isPageUp(keyCode) || isPageDown(keyCode)) {\n      ev.preventDefault();\n    }\n\n    spottable.current.animateOnFocus = true;\n\n    if (!repeat && hasFocus()) {\n      var direction = null;\n\n      if (isPageUp(keyCode) || isPageDown(keyCode)) {\n        if (props.direction === 'vertical' || props.direction === 'both') {\n          direction = isPageUp(keyCode) ? 'up' : 'down';\n\n          if (isContent(target)) {\n            ev.stopPropagation();\n            scrollByPage(direction);\n          }\n\n          if (props.overscrollEffectOn.pageKey) {\n            checkAndApplyOverscrollEffectByDirection(direction);\n          }\n        }\n      } else if ((0, _spotlight.getDirection)(keyCode) && (scrollMode === 'translate' || scrollMode === 'native' && !_spotlight[\"default\"].getPointerMode())) {\n        var element = _spotlight[\"default\"].getCurrent();\n\n        scrollContainerHandle.current.lastInputType = 'arrowKey';\n        direction = (0, _spotlight.getDirection)(keyCode);\n\n        if (props.overscrollEffectOn.arrowKey && !(element ? (0, _target.getTargetByDirectionFromElement)(direction, element) : null)) {\n          checkAndApplyOverscrollEffectByDirection(direction);\n        }\n      }\n    }\n  }\n\n  function scrollByPage(pageKeyDirection) {\n    var scrollTop = scrollContainerHandle.current.scrollTop,\n        focusedItem = _spotlight[\"default\"].getCurrent(),\n        bounds = scrollContainerHandle.current.getScrollBounds(),\n        isUp = pageKeyDirection === 'up',\n        directionFactor = isUp ? -1 : 1,\n        pageDistance = directionFactor * bounds.clientHeight * paginationPageMultiplier;\n\n    var direction = pageKeyDirection;\n    var scrollPossible = false;\n\n    if (scrollMode === 'translate') {\n      scrollPossible = isUp ? scrollTop > 0 : bounds.maxTop > scrollTop;\n    } else {\n      scrollPossible = isUp ? scrollTop > 0 : bounds.maxTop - scrollTop > epsilon;\n    }\n\n    scrollContainerHandle.current.lastInputType = 'pageKey';\n\n    if (directionFactor !== scrollContainerHandle.current.wheelDirection) {\n      scrollContainerHandle.current.isScrollAnimationTargetAccumulated = false;\n      scrollContainerHandle.current.wheelDirection = directionFactor;\n    }\n\n    if (scrollPossible) {\n      if (focusedItem) {\n        var contentNode = scrollContentRef.current; // Should do nothing when focusedItem is paging control button of Scrollbar\n\n        if (_utilDOM[\"default\"].containsDangerously(contentNode, focusedItem)) {\n          var contentRect = contentNode.getBoundingClientRect(),\n              clientRect = focusedItem.getBoundingClientRect(),\n              yAdjust = isUp ? 1 : -1,\n              x = (0, _util.clamp)(contentRect.left, contentRect.right, (clientRect.right + clientRect.left) / 2);\n          var y = 0;\n\n          if (bounds.maxTop - epsilon < scrollTop + pageDistance || epsilon > scrollTop + pageDistance) {\n            y = contentRect[isUp ? 'top' : 'bottom'] + yAdjust;\n            direction = isUp ? 'down' : 'up'; // Change direction to find target in the content\n          } else {\n            y = (0, _util.clamp)(contentRect.top, contentRect.bottom, (clientRect.bottom + clientRect.top) / 2);\n          }\n\n          focusedItem.blur();\n\n          if (!props['data-spotlight-container-disabled']) {\n            themeScrollContentHandle.current.setContainerDisabled(true);\n          }\n\n          if (themeScrollContentHandle.current.pauseSpotlight) {\n            themeScrollContentHandle.current.pauseSpotlight(true);\n          }\n\n          spottable.current.pointToFocus = {\n            direction: direction,\n            x: x,\n            y: y\n          };\n        }\n      } else {\n        spottable.current.pointToFocus = {\n          direction: direction,\n          x: lastPointer.x,\n          y: lastPointer.y\n        };\n      }\n\n      scrollContainerHandle.current.scrollToAccumulatedTarget(pageDistance, true, props.overscrollEffectOn.pageKey);\n    }\n  }\n\n  function scrollByPageOnPointerMode(ev) {\n    var keyCode = ev.keyCode,\n        repeat = ev.repeat;\n    (0, _handle.forward)('onKeyDown', ev, props);\n    ev.preventDefault();\n    spottable.current.animateOnFocus = true;\n\n    if (!repeat && (props.direction === 'vertical' || props.direction === 'both')) {\n      var direction = isPageUp(keyCode) ? 'up' : 'down';\n      scrollByPage(direction);\n\n      if (props.overscrollEffectOn.pageKey) {\n        /* if the spotlight focus will not move */\n        checkAndApplyOverscrollEffectByDirection(direction);\n      }\n\n      return true; // means consumed\n    }\n\n    return false; // means to be propagated\n  } // Return\n\n\n  return {\n    handleKeyDown: handleKeyDown,\n    lastPointer: lastPointer,\n    scrollByPageOnPointerMode: scrollByPageOnPointerMode\n  };\n};\n/*\n * Track the last position of the pointer to check if a list should scroll by\n * page up/down keys when the pointer is on a list without any focused node.\n * `keydown` event does not occur if there is no focus on the node and\n * its descendants, we add `keydown` handler to `document` also.\n */\n\n\nexports.useEventKey = useEventKey;\nvar scrollers = new Map(); // An app could have lists and/or scrollers more than one,\n// so we should test all of them when page up/down key is pressed.\n\nvar pointerTracker = function pointerTracker(ev) {\n  lastPointer.x = ev.clientX;\n  lastPointer.y = ev.clientY;\n};\n\nvar pageKeyHandler = function pageKeyHandler(ev) {\n  var keyCode = ev.keyCode;\n\n  if (_spotlight[\"default\"].getPointerMode() && !_spotlight[\"default\"].getCurrent() && (isPageUp(keyCode) || isPageDown(keyCode))) {\n    var _lastPointer = lastPointer,\n        x = _lastPointer.x,\n        y = _lastPointer.y,\n        elem = document.elementFromPoint(x, y);\n\n    if (elem) {\n      var _iterator = _createForOfIteratorHelper(scrollers),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              key = _step$value[0],\n              value = _step$value[1];\n\n          if (_utilDOM[\"default\"].containsDangerously(value, elem)) {\n            /* To handle page keys in nested scrollable components,\n             * break the loop only when `scrollByPageOnPointerMode` returns `true`.\n             * This approach assumes that an inner scrollable component is\n             * mounted earlier than an outer scrollable component.\n             */\n            if (key.scrollByPageOnPointerMode(ev)) {\n              break;\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }\n};\n\nvar useEventMonitor = function useEventMonitor(props, instances, context) {\n  var scrollContainerRef = instances.scrollContainerRef;\n  var lastPointerProp = context.lastPointer,\n      scrollByPageOnPointerMode = context.scrollByPageOnPointerMode; // Mutable value\n\n  var mutableRef = (0, _react.useRef)({\n    pageKeyHandlerObj: {\n      scrollByPageOnPointerMode: scrollByPageOnPointerMode\n    }\n  });\n  lastPointer = lastPointerProp; // Hooks\n\n  (0, _react.useEffect)(function () {\n    var setMonitorEventTarget = function setMonitorEventTarget(target) {\n      scrollers.set(mutableRef.current.pageKeyHandlerObj, target);\n    };\n\n    var deleteMonitorEventTarget = function deleteMonitorEventTarget() {\n      scrollers[\"delete\"](mutableRef.current.pageKeyHandlerObj);\n    };\n\n    setMonitorEventTarget(scrollContainerRef.current);\n    return function () {\n      // TODO: Replace `this` to something.\n      deleteMonitorEventTarget();\n    };\n  }, [scrollContainerRef]);\n};\n\nexports.useEventMonitor = useEventMonitor;\n(0, _snapshot.onWindowReady)(function () {\n  (0, _utilEvent[\"default\"])('mousemove').addEventListener(document, pointerTracker);\n  (0, _utilEvent[\"default\"])('keydown').addEventListener(document, pageKeyHandler);\n});\n\nvar useEventMouse = function useEventMouse(props, instances) {\n  var scrollMode = props.scrollMode;\n  var themeScrollContentHandle = instances.themeScrollContentHandle,\n      scrollContainerHandle = instances.scrollContainerHandle; // Functions\n\n  function handleFlick(_ref) {\n    var direction = _ref.direction;\n\n    var _scrollContainerHandl = scrollContainerHandle.current,\n        canScrollHorizontally = _scrollContainerHandl.canScrollHorizontally,\n        canScrollVertically = _scrollContainerHandl.canScrollVertically,\n        bounds = scrollContainerHandle.current.getScrollBounds(),\n        focusedItem = _spotlight[\"default\"].getCurrent();\n\n    if (focusedItem) {\n      focusedItem.blur();\n    }\n\n    if ((direction === 'vertical' && canScrollVertically(bounds) || direction === 'horizontal' && canScrollHorizontally(bounds)) && !props['data-spotlight-container-disabled']) {\n      themeScrollContentHandle.current.setContainerDisabled(true);\n    }\n  }\n\n  function handleMouseDown(ev) {\n    if (props['data-spotlight-container-disabled']) {\n      ev.preventDefault();\n    } else if (scrollMode === 'native') {\n      themeScrollContentHandle.current.setContainerDisabled(false);\n    }\n  } // Return\n\n\n  return {\n    handleFlick: handleFlick,\n    handleMouseDown: handleMouseDown\n  };\n};\n\nexports.useEventMouse = useEventMouse;\n\nvar useEventTouch = function useEventTouch() {\n  // Functions\n  function handleTouchStart() {\n    var focusedItem = _spotlight[\"default\"].getCurrent();\n\n    if (!_spotlight[\"default\"].isPaused() && focusedItem) {\n      focusedItem.blur();\n    }\n  } // Return\n\n\n  return {\n    handleTouchStart: handleTouchStart\n  };\n};\n\nexports.useEventTouch = useEventTouch;\n\nvar useEventVoice = function useEventVoice(props, instances) {\n  var scrollContainerRef = instances.scrollContainerRef,\n      scrollContainerHandle = instances.scrollContainerHandle; // Mutable value\n\n  var mutableRef = (0, _react.useRef)({\n    isVoiceControl: false,\n    voiceControlDirection: 'vertical'\n  }); // Functions\n\n  var updateFocusAfterVoiceControl = function updateFocusAfterVoiceControl() {\n    var spotItem = _spotlight[\"default\"].getCurrent(),\n        scrollContainerNode = scrollContainerRef.current;\n\n    if (_utilDOM[\"default\"].containsDangerously(scrollContainerNode, spotItem)) {\n      var viewportBounds = scrollContainerNode.getBoundingClientRect(),\n          spotItemBounds = spotItem.getBoundingClientRect(),\n          nodes = _spotlight[\"default\"].getSpottableDescendants(scrollContainerNode.dataset.spotlightId),\n          first = mutableRef.current.voiceControlDirection === 'vertical' ? 'top' : 'left',\n          last = mutableRef.current.voiceControlDirection === 'vertical' ? 'bottom' : 'right';\n\n      if (spotItemBounds[last] < viewportBounds[first] || spotItemBounds[first] > viewportBounds[last]) {\n        for (var i = 0; i < nodes.length; i++) {\n          var nodeBounds = nodes[i].getBoundingClientRect();\n\n          if (nodeBounds[first] > viewportBounds[first] && nodeBounds[last] < viewportBounds[last]) {\n            _spotlight[\"default\"].focus(nodes[i]);\n\n            break;\n          }\n        }\n      }\n    }\n  };\n\n  function stopVoice() {\n    if (mutableRef.current.isVoiceControl) {\n      mutableRef.current.isVoiceControl = false;\n      updateFocusAfterVoiceControl();\n    }\n  }\n\n  var isReachedEdge = function isReachedEdge(scrollPos, ltrBound, rtlBound) {\n    var isRtl = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    var bound = isRtl ? rtlBound : ltrBound;\n    return bound === 0 && scrollPos === 0 || bound > 0 && scrollPos >= bound - 1;\n  };\n\n  var handleVoice = function handleVoice(e) {\n    var isHorizontal = props.direction === 'horizontal',\n        isRtl = scrollContainerHandle.current.rtl,\n        _scrollContainerHandl2 = scrollContainerHandle.current,\n        scrollTop = _scrollContainerHandl2.scrollTop,\n        scrollLeft = _scrollContainerHandl2.scrollLeft,\n        _scrollContainerHandl3 = scrollContainerHandle.current.getScrollBounds(),\n        maxLeft = _scrollContainerHandl3.maxLeft,\n        maxTop = _scrollContainerHandl3.maxTop,\n        verticalDirection = ['up', 'down', 'top', 'bottom'],\n        horizontalDirection = isRtl ? ['right', 'left', 'rightmost', 'leftmost'] : ['left', 'right', 'leftmost', 'rightmost'],\n        movement = ['previous', 'next', 'first', 'last'];\n\n    var scroll = e && e.detail && e.detail.scroll,\n        index = movement.indexOf(scroll);\n\n    if (index > -1) {\n      scroll = isHorizontal ? horizontalDirection[index] : verticalDirection[index];\n    }\n\n    mutableRef.current.voiceControlDirection = verticalDirection.includes(scroll) && 'vertical' || horizontalDirection.includes(scroll) && 'horizontal' || null; // Case 1. Invalid direction\n\n    if (mutableRef.current.voiceControlDirection === null) {\n      mutableRef.current.isVoiceControl = false; // Case 2. Cannot scroll\n    } else if (['up', 'top'].includes(scroll) && isReachedEdge(scrollTop, 0) || ['down', 'bottom'].includes(scroll) && isReachedEdge(scrollTop, maxTop) || ['left', 'leftmost'].includes(scroll) && isReachedEdge(scrollLeft, 0, maxLeft, isRtl) || ['right', 'rightmost'].includes(scroll) && isReachedEdge(scrollLeft, maxLeft, 0, isRtl)) {\n      if (window.webOSVoiceReportActionResult) {\n        window.webOSVoiceReportActionResult({\n          voiceUi: {\n            exception: 'alreadyCompleted'\n          }\n        });\n        e.preventDefault();\n      } // Case 3. Can scroll\n\n    } else {\n      mutableRef.current.isVoiceControl = true;\n\n      if (['up', 'down', 'left', 'right'].includes(scroll)) {\n        var bounds = scrollContainerHandle.current.getScrollBounds(),\n            directionFactor = scroll === 'up' || scroll === 'left' && !isRtl || scroll === 'right' && isRtl,\n            scrollVertically = verticalDirection.includes(scroll),\n            direction = directionFactor ? -1 : 1,\n            pageDistance = direction * (scrollVertically ? bounds.clientHeight : bounds.clientWidth) * paginationPageMultiplier;\n        scrollContainerHandle.current.lastInputType = 'pageKey';\n\n        if (direction !== scrollContainerHandle.current.wheelDirection) {\n          scrollContainerHandle.current.isScrollAnimationTargetAccumulated = false;\n          scrollContainerHandle.current.wheelDirection = direction;\n        }\n\n        scrollContainerHandle.current.scrollToAccumulatedTarget(pageDistance, scrollVertically, props.overscrollEffectOn.pageKey);\n      } else {\n        // ['top', 'bottom', 'leftmost', 'rightmost'].includes(scroll)\n        scrollContainerHandle.current.scrollTo({\n          align: verticalDirection.includes(scroll) && scroll || (scroll === 'leftmost' && isRtl || scroll === 'rightmost' && !isRtl) && 'right' || 'left'\n        });\n      }\n\n      e.preventDefault();\n    }\n  };\n\n  function addVoiceEventListener(scrollContentRef) {\n    if (_platform[\"default\"].webos) {\n      (0, _utilEvent[\"default\"])('webOSVoice').addEventListener(scrollContentRef, handleVoice);\n\n      if (scrollContainerHandle && scrollContainerHandle.current && scrollContainerHandle.current.getScrollBounds) {\n        var bounds = scrollContainerHandle.current.getScrollBounds();\n\n        if (scrollContainerHandle.current.canScrollVertically(bounds) || scrollContainerHandle.current.canScrollHorizontally(bounds)) {\n          scrollContentRef.current.setAttribute('data-webos-voice-intent', 'Scroll');\n        }\n      }\n    }\n  }\n\n  function removeVoiceEventListener(scrollContentRef) {\n    if (_platform[\"default\"].webos) {\n      (0, _utilEvent[\"default\"])('webOSVoice').removeEventListener(scrollContentRef, handleVoice);\n      scrollContentRef.current.removeAttribute('data-webos-voice-intent');\n    }\n  } // Return\n\n\n  return {\n    addVoiceEventListener: addVoiceEventListener,\n    removeVoiceEventListener: removeVoiceEventListener,\n    stopVoice: stopVoice\n  };\n};\n\nexports.useEventVoice = useEventVoice;\n\nvar useEventWheel = function useEventWheel(props, instances) {\n  var dataSize = props.dataSize,\n      scrollMode = props.scrollMode,\n      snapToCenter = props.snapToCenter;\n  var themeScrollContentHandle = instances.themeScrollContentHandle,\n      scrollContainerHandle = instances.scrollContainerHandle,\n      scrollContentHandle = instances.scrollContentHandle,\n      scrollContentRef = instances.scrollContentRef,\n      spottable = instances.spottable; // Functions\n\n  function initializeWheeling() {\n    if (!props['data-spotlight-container-disabled']) {\n      themeScrollContentHandle.current.setContainerDisabled(true);\n    }\n\n    spottable.current.isWheeling = true;\n  }\n\n  function handleWheel(_ref2) {\n    var delta = _ref2.delta;\n\n    var focusedItem = _spotlight[\"default\"].getCurrent();\n\n    if (focusedItem) {\n      focusedItem.blur();\n    }\n\n    if (delta !== 0) {\n      initializeWheeling();\n    }\n  }\n  /*\n   * wheel event handler;\n   * - for horizontal scroll, supports wheel action on any children nodes since web engine cannot support this\n   * - for vertical scroll, supports wheel action on scrollbars only\n   */\n\n\n  function handleWheelNative(ev) {\n    var overscrollEffectRequired = props.overscrollEffectOn.wheel;\n    var bounds = scrollContainerHandle.current.getScrollBounds();\n    var canScrollHorizontally = scrollContainerHandle.current.canScrollHorizontally(bounds);\n    var canScrollVertically = scrollContainerHandle.current.canScrollVertically(bounds);\n    var eventDeltaMode = ev.deltaMode;\n    var eventDelta = -ev.wheelDeltaY || ev.deltaY;\n    var positiveDelta = eventDelta > 0;\n    var negativeDelta = eventDelta < 0;\n    var _scrollContainerHandl4 = scrollContainerHandle.current,\n        scrollTop = _scrollContainerHandl4.scrollTop,\n        scrollLeft = _scrollContainerHandl4.scrollLeft;\n    var offset = snapToCenter ? scrollContentHandle.current.primary.gridSize : 0;\n    var delta = 0;\n    var needToHideScrollbarTrack = false;\n\n    if (typeof window !== 'undefined') {\n      window.document.activeElement.blur();\n    }\n\n    scrollContainerHandle.current.showScrollbarTrack(bounds); // FIXME This routine is a temporary support for horizontal wheel scroll.\n    // FIXME If web engine supports horizontal wheel, this routine should be refined or removed.\n\n    if (canScrollVertically) {\n      // This routine handles wheel events on scrollbars for vertical scroll.\n      if (negativeDelta && scrollTop > 0 + offset || positiveDelta && scrollTop < bounds.maxTop - offset) {\n        if (!spottable.current.isWheeling) {\n          initializeWheeling();\n        } // If ev.target is a descendant of scrollContent, the event will be handled on scroll event handler.\n\n\n        if (!_utilDOM[\"default\"].containsDangerously(scrollContentRef.current, ev.target) || snapToCenter) {\n          delta = scrollContainerHandle.current.calculateDistanceByWheel(eventDeltaMode, eventDelta, bounds.clientHeight * scrollWheelPageMultiplierForMaxPixel);\n          needToHideScrollbarTrack = !delta;\n          ev.preventDefault();\n        } else if (overscrollEffectRequired) {\n          scrollContainerHandle.current.checkAndApplyOverscrollEffect('vertical', positiveDelta ? 'after' : 'before', overscrollTypeOnce);\n        }\n\n        ev.stopPropagation();\n      } else {\n        if (overscrollEffectRequired && (negativeDelta && scrollTop <= 0 || positiveDelta && scrollTop >= bounds.maxTop)) {\n          scrollContainerHandle.current.applyOverscrollEffect('vertical', positiveDelta ? 'after' : 'before', overscrollTypeOnce);\n        }\n\n        needToHideScrollbarTrack = true;\n      }\n    } else if (canScrollHorizontally) {\n      // this routine handles wheel events on any children for horizontal scroll.\n      if (negativeDelta && scrollLeft > 0 + offset || positiveDelta && scrollLeft < bounds.maxLeft - offset) {\n        if (!spottable.current.isWheeling) {\n          initializeWheeling();\n        }\n\n        delta = scrollContainerHandle.current.calculateDistanceByWheel(eventDeltaMode, eventDelta, bounds.clientWidth * scrollWheelPageMultiplierForMaxPixel);\n        needToHideScrollbarTrack = !delta;\n        ev.preventDefault();\n        ev.stopPropagation();\n      } else {\n        if (overscrollEffectRequired && (negativeDelta && scrollLeft <= 0 || positiveDelta && scrollLeft >= bounds.maxLeft)) {\n          scrollContainerHandle.current.applyOverscrollEffect('horizontal', positiveDelta ? 'after' : 'before', overscrollTypeOnce);\n        }\n\n        needToHideScrollbarTrack = true;\n      }\n    }\n\n    if (delta !== 0) {\n      /* prevent native scrolling feature for vertical direction */\n      ev.preventDefault();\n      var direction = Math.sign(delta); // Not to accumulate scroll position if wheel direction is different from hold direction\n\n      if (direction !== scrollContainerHandle.current.wheelDirection) {\n        scrollContainerHandle.current.isScrollAnimationTargetAccumulated = false;\n        scrollContainerHandle.current.wheelDirection = direction;\n      }\n\n      if (!snapToCenter) {\n        scrollContainerHandle.current.scrollToAccumulatedTarget(delta, canScrollVertically, overscrollEffectRequired);\n      } else {\n        var dimensionToExtent = scrollContentHandle.current.dimensionToExtent;\n        var currentIndex = scrollContentHandle.current.getCenterItemIndexFromScrollPosition(canScrollVertically ? scrollTop : scrollLeft);\n        var nextIndex = currentIndex + direction * dimensionToExtent;\n\n        if (nextIndex > 0 && nextIndex < dataSize - 1) {\n          if (typeof document === 'object') {\n            var target = document.querySelector(\"[data-index=\\\"\".concat(nextIndex, \"\\\"] div\")); // remove effect\n\n            themeScrollContentHandle.current.removeScaleEffect(); // add effect\n\n            themeScrollContentHandle.current.addScaleEffect(target);\n          }\n\n          if (themeScrollContentHandle.current.resetSnapToCenterStatus) {\n            themeScrollContentHandle.current.resetSnapToCenterStatus();\n          }\n\n          scrollContainerHandle.current.scrollTo({\n            index: nextIndex,\n            stickTo: 'center'\n          });\n        }\n      }\n    }\n\n    if (needToHideScrollbarTrack) {\n      scrollContainerHandle.current.startHidingScrollbarTrack();\n    }\n  } // Return\n\n\n  return {\n    handleWheel: scrollMode === 'translate' ? handleWheel : handleWheelNative\n  };\n};\n\nexports.useEventWheel = useEventWheel;"]},"metadata":{},"sourceType":"module"}