{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PopupBase = exports.Popup = exports[\"default\"] = void 0;\n\nvar _keymap = require(\"@enact/core/keymap\");\n\nvar _dispatcher = require(\"@enact/core/dispatcher\");\n\nvar _FloatingLayer = _interopRequireDefault(require(\"@enact/ui/FloatingLayer\"));\n\nvar _kind = _interopRequireDefault(require(\"@enact/core/kind\"));\n\nvar _react = require(\"react\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _spotlight = _interopRequireWildcard(require(\"@enact/spotlight\"));\n\nvar _Pause = _interopRequireDefault(require(\"@enact/spotlight/Pause\"));\n\nvar _SpotlightContainerDecorator = _interopRequireDefault(require(\"@enact/spotlight/SpotlightContainerDecorator\"));\n\nvar _Transition = _interopRequireDefault(require(\"@enact/ui/Transition\"));\n\nvar _handle = require(\"@enact/core/handle\");\n\nvar _warning = _interopRequireDefault(require(\"warning\"));\n\nvar _Skinnable = _interopRequireDefault(require(\"../Skinnable\"));\n\nvar _PopupModule = _interopRequireDefault(require(\"./Popup.module.css\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nvar isDown = (0, _keymap.is)('down');\nvar isLeft = (0, _keymap.is)('left');\nvar isRight = (0, _keymap.is)('right');\nvar isUp = (0, _keymap.is)('up');\nvar TransitionContainer = (0, _SpotlightContainerDecorator[\"default\"])({\n  enterTo: 'default-element',\n  preserveId: true\n}, _Transition[\"default\"]);\n\nvar getContainerNode = function getContainerNode(containerId) {\n  return document.querySelector(\"[data-spotlight-id='\".concat(containerId, \"']\"));\n};\n\nvar forwardHide = (0, _handle.forward)('onHide');\nvar forwardShow = (0, _handle.forward)('onShow');\nvar transitionDirection = {\n  bottom: 'down',\n  center: 'down',\n  fullscreen: 'down',\n  left: 'left',\n  right: 'right',\n  top: 'up'\n};\n/**\n * The base popup component.\n *\n * @class PopupBase\n * @memberof sandstone/Popup\n * @ui\n * @public\n */\n\nvar PopupBase = (0, _kind[\"default\"])({\n  name: 'PopupBase',\n  propTypes:\n  /** @lends sandstone/Popup.PopupBase.prototype */\n  {\n    /**\n     * The contents to be displayed in the body of the popup.\n     *\n     * @type {Node}\n     * @required\n     * @public\n     */\n    children: _propTypes[\"default\"].node.isRequired,\n\n    /**\n     * Set the priority with which screen reader should treat updates to live regions for the Popup.\n     *\n     * @type {String|Object}\n     * @public\n     */\n    'aria-live': _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].object]),\n\n    /**\n     * Customizes the component by mapping the supplied collection of CSS class names to the\n     * corresponding internal elements and states of this component.\n     *\n     * The following classes are supported:\n     *\n     * * `popup` - The root class name\n     * * `body` - Applied to the body content container\n     * * `popupTransitionContainer` - Applied to the Popup's outermost container. Sizing can be\n     *                                applied here for percentage-of-screen values.\n     * * `top` - Applied when the `position` is 'top'\n     * * `right` - Applied when the `position` is 'right'\n     * * `bottom` - Applied when the `position` is 'bottom'\n     * * `left` - Applied when the `position` is 'left'\n     *\n     * @type {Object}\n     * @private\n     */\n    css: _propTypes[\"default\"].object,\n\n    /**\n     * Support accessibility options.\n     *\n     * If true, the aria-live and role in Popup are `null`.\n     *\n     * @type {Boolean}\n     * @default false\n     * @private\n     */\n    noAlertRole: _propTypes[\"default\"].bool,\n\n    /**\n     * Disables transition animation.\n     *\n     * @type {Boolean}\n     * @default false\n     * @public\n     */\n    noAnimation: _propTypes[\"default\"].bool,\n\n    /**\n     * Called after the popup's \"hide\" transition finishes.\n     *\n     * @type {Function}\n     * @public\n     */\n    onHide: _propTypes[\"default\"].func,\n\n    /**\n     * Called after the popup's \"show\" transition finishes.\n     *\n     * @type {Function}\n     * @public\n     */\n    onShow: _propTypes[\"default\"].func,\n\n    /**\n     * Controls the visibility of the Popup.\n     *\n     * By default, the Popup and its contents are not rendered until `open`.\n     *\n     * @type {Boolean}\n     * @default false\n     * @public\n     */\n    open: _propTypes[\"default\"].bool,\n\n    /**\n     * Position of the Popup on the screen.\n     *\n     * @type {('bottom'|'center'|'fullscreen'|'left'|'right'|'top')}\n     * @default 'bottom'\n     * @public\n     */\n    position: _propTypes[\"default\"].oneOf(['bottom', 'center', 'fullscreen', 'left', 'right', 'top']),\n\n    /**\n     * The ARIA role for the Popup.\n     *\n     * @type {String|Object}\n     * @public\n     */\n    role: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].object]),\n\n    /**\n     * The container id for {@link spotlight/Spotlight}.\n     *\n     * @type {String}\n     * @default null\n     * @public\n     */\n    spotlightId: _propTypes[\"default\"].string,\n\n    /**\n     * Restricts or prioritizes navigation when focus attempts to leave the popup.\n     *\n     * It can be either `'none'`, `'self-first'`, or `'self-only'`.\n     *\n     * Note: The ready-to-use [Popup]{@link sandstone/Popup.Popup} component only supports\n     * `'self-first'` and `'self-only'`.\n     *\n     * @type {('none'|'self-first'|'self-only')}\n     * @default 'self-only'\n     * @public\n     */\n    spotlightRestrict: _propTypes[\"default\"].oneOf(['none', 'self-first', 'self-only'])\n  },\n  defaultProps: {\n    noAlertRole: false,\n    noAnimation: false,\n    open: false,\n    position: 'bottom',\n    spotlightRestrict: 'self-only'\n  },\n  styles: {\n    css: _PopupModule[\"default\"],\n    className: 'popup',\n    publicClassNames: ['popup', 'body', 'popupTransitionContainer', 'top', 'right', 'bottom', 'left']\n  },\n  computed: {\n    // When passing `aria-live` prop to the Popup, the prop should work first.\n    // If `noAlertRole` is true, alert role and aria-live will be removed. Contents of the popup won't be read automatically when opened.\n    // Otherwise, `aria-live` will be usually `off`.\n    'aria-live': function ariaLive(_ref) {\n      var live = _ref['aria-live'],\n          noAlertRole = _ref.noAlertRole;\n      return typeof live !== 'undefined' ? live : !noAlertRole && 'off' || null;\n    },\n    className: function className(_ref2) {\n      var position = _ref2.position,\n          styler = _ref2.styler;\n      return styler.append(position);\n    },\n    direction: function direction(_ref3) {\n      var position = _ref3.position;\n      return transitionDirection[position];\n    },\n    // When passing `role` prop to the Popup, the prop should work first.\n    // If `noAlertRole` is true, alert role and aria-live will be removed. Contents of the popup won't be read automatically when opened.\n    // Otherwise, `role` will be usually `alert`.\n    role: function role(_ref4) {\n      var noAlertRole = _ref4.noAlertRole,\n          _role = _ref4.role;\n      return typeof _role !== 'undefined' ? _role : !noAlertRole && 'alert' || null;\n    },\n    transitionContainerClassName: function transitionContainerClassName(_ref5) {\n      var css = _ref5.css,\n          position = _ref5.position,\n          styler = _ref5.styler;\n      return styler.join(css.popupTransitionContainer, position);\n    }\n  },\n  render: function render(_ref6) {\n    var children = _ref6.children,\n        css = _ref6.css,\n        direction = _ref6.direction,\n        noAnimation = _ref6.noAnimation,\n        onHide = _ref6.onHide,\n        onShow = _ref6.onShow,\n        open = _ref6.open,\n        position = _ref6.position,\n        spotlightId = _ref6.spotlightId,\n        spotlightRestrict = _ref6.spotlightRestrict,\n        transitionContainerClassName = _ref6.transitionContainerClassName,\n        rest = _objectWithoutProperties(_ref6, [\"children\", \"css\", \"direction\", \"noAnimation\", \"onHide\", \"onShow\", \"open\", \"position\", \"spotlightId\", \"spotlightRestrict\", \"transitionContainerClassName\"]);\n\n    delete rest.noAlertRole;\n    return /*#__PURE__*/(0, _jsxRuntime.jsx)(TransitionContainer, {\n      className: transitionContainerClassName,\n      css: css,\n      direction: direction,\n      duration: \"short\",\n      noAnimation: position === 'fullscreen' ? true : noAnimation,\n      onHide: onHide,\n      onShow: onShow,\n      spotlightDisabled: !open,\n      spotlightId: spotlightId,\n      spotlightRestrict: spotlightRestrict,\n      type: \"slide\",\n      visible: open,\n      children: /*#__PURE__*/(0, _jsxRuntime.jsx)(\"div\", _objectSpread(_objectSpread({}, rest), {}, {\n        children: /*#__PURE__*/(0, _jsxRuntime.jsx)(\"div\", {\n          className: css.body,\n          children: children\n        })\n      }))\n    });\n  }\n});\nexports.PopupBase = PopupBase;\nvar SkinnedPopupBase = (0, _Skinnable[\"default\"])(PopupBase); // Deprecate using scrimType 'none' with spotlightRestrict of 'self-only'\n\nvar checkScrimNone = function checkScrimNone(props) {\n  var validScrim = !(props.scrimType === 'none' && props.spotlightRestrict === 'self-only');\n  process.env.NODE_ENV !== \"production\" ? (0, _warning[\"default\"])(validScrim, \"Using 'spotlightRestrict' of 'self-only' without a scrim \" + 'is not supported. Use a transparent scrim to prevent spotlight focus outside of the popup') : void 0;\n};\n\nvar OpenState = {\n  CLOSED: 0,\n  OPENING: 1,\n  OPEN: 2\n};\n/**\n * A stateful component that renders a popup in a\n * [FloatingLayer]{@link ui/FloatingLayer.FloatingLayer}.\n *\n * @class Popup\n * @memberof sandstone/Popup\n * @extends sandstone/Popup.PopupBase\n * @ui\n * @public\n */\n\nvar Popup = /*#__PURE__*/function (_Component) {\n  _inherits(Popup, _Component);\n\n  var _super = _createSuper(Popup);\n\n  function Popup(props) {\n    var _this;\n\n    _classCallCheck(this, Popup);\n\n    _this = _super.call(this, props);\n\n    _this.handleFloatingLayerOpen = function () {\n      if (!_this.props.noAnimation && _this.state.popupOpen !== OpenState.OPEN) {\n        _this.setState({\n          popupOpen: OpenState.OPENING\n        });\n      } else if (_this.state.popupOpen === OpenState.OPEN && _this.props.open) {\n        _this.spotPopupContent();\n      }\n    };\n\n    _this.handleKeyDown = function (ev) {\n      var _this$props = _this.props,\n          onClose = _this$props.onClose,\n          no5WayClose = _this$props.no5WayClose,\n          position = _this$props.position,\n          spotlightRestrict = _this$props.spotlightRestrict;\n      if (no5WayClose) return;\n      var containerId = _this.state.containerId;\n      var keyCode = ev.keyCode;\n      var direction = (0, _spotlight.getDirection)(keyCode);\n\n      var spottables = _spotlight[\"default\"].getSpottableDescendants(containerId).length;\n\n      var current = _spotlight[\"default\"].getCurrent();\n\n      if (direction && (!spottables || current && getContainerNode(containerId).contains(current))) {\n        // explicitly restrict navigation in order to manage focus state when attempting to leave the popup\n        _spotlight[\"default\"].set(containerId, {\n          restrict: 'self-only'\n        });\n\n        if (onClose) {\n          var focusChanged;\n\n          if (spottables && current && spotlightRestrict !== 'self-only') {\n            focusChanged = _spotlight[\"default\"].move(direction);\n\n            if (focusChanged) {\n              // stop propagation to prevent default spotlight behavior\n              ev.stopPropagation();\n            }\n          }\n\n          if (!spottables || focusChanged === false && (position === 'center' || isUp(keyCode) && position === 'bottom' || isDown(keyCode) && position === 'top' || isRight(keyCode) && position === 'left' || isLeft(keyCode) && position === 'right')) {\n            // prevent default page scrolling\n            ev.preventDefault(); // stop propagation to prevent default spotlight behavior\n\n            ev.stopPropagation(); // set the pointer mode to false on keydown\n\n            _spotlight[\"default\"].setPointerMode(false);\n\n            onClose(ev);\n          }\n        }\n      }\n    };\n\n    _this.handlePopupHide = function (ev) {\n      forwardHide(ev, _this.props);\n\n      _this.setState({\n        floatLayerOpen: false,\n        activator: null\n      });\n\n      if (!ev.currentTarget || ev.currentTarget.getAttribute('data-spotlight-id') === _this.state.containerId) {\n        _this.spotActivator(_this.state.activator);\n      }\n    };\n\n    _this.handlePopupShow = function (ev) {\n      forwardShow(ev, _this.props);\n\n      _this.setState({\n        popupOpen: OpenState.OPEN\n      });\n\n      if (!ev.currentTarget || ev.currentTarget.getAttribute('data-spotlight-id') === _this.state.containerId) {\n        _this.spotPopupContent();\n      }\n    };\n\n    _this.spotActivator = function (activator) {\n      _this.paused.resume(); // only spot the activator if the popup is closed\n\n\n      if (_this.props.open) return;\n\n      var current = _spotlight[\"default\"].getCurrent();\n\n      var containerNode = getContainerNode(_this.state.containerId);\n      (0, _dispatcher.off)('keydown', _this.handleKeyDown); // if there is no currently-spotted control or it is wrapped by the popup's container, we\n      // know it's safe to change focus\n\n      if (!current || containerNode && containerNode.contains(current)) {\n        // attempt to set focus to the activator, if available\n        if (!_spotlight[\"default\"].isPaused() && !_spotlight[\"default\"].focus(activator)) {\n          _spotlight[\"default\"].focus();\n        }\n      }\n    };\n\n    _this.spotPopupContent = function () {\n      _this.paused.resume(); // only spot the activator if the popup is open\n\n\n      if (!_this.props.open) return;\n      var containerId = _this.state.containerId;\n      (0, _dispatcher.on)('keydown', _this.handleKeyDown);\n\n      if (!_spotlight[\"default\"].isPaused() && !_spotlight[\"default\"].focus(containerId)) {\n        var current = _spotlight[\"default\"].getCurrent(); // In cases where the container contains no spottable controls or we're in pointer-mode, focus\n        // cannot inherently set the active container or blur the active control, so we must do that\n        // here.\n\n\n        if (current) {\n          current.blur();\n        }\n\n        _spotlight[\"default\"].setActiveContainer(containerId);\n      }\n    };\n\n    _this.paused = new _Pause[\"default\"]('Popup');\n    _this.state = {\n      floatLayerOpen: _this.props.open,\n      popupOpen: _this.props.open ? OpenState.OPEN : OpenState.CLOSED,\n      prevOpen: _this.props.open,\n      containerId: _spotlight[\"default\"].add(),\n      activator: null\n    };\n    checkScrimNone(_this.props);\n    return _this;\n  } // Spot the content after it's mounted.\n\n\n  _createClass(Popup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.open) {\n        // If the popup is open on mount, we need to pause spotlight so nothing steals focus\n        // while the popup is rendering.\n        this.paused.pause();\n\n        if (getContainerNode(this.state.containerId)) {\n          this.spotPopupContent();\n        }\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.props.open !== prevProps.open) {\n        if (!this.props.noAnimation) {\n          if (!this.props.open && this.state.popupOpen === OpenState.CLOSED) {\n            // If the popup is supposed to be closed (!this.props.open) and is actually\n            // fully closed (OpenState.CLOSED), we must resume spotlight navigation. This\n            // can occur when quickly toggling a Popup open and closed.\n            this.paused.resume();\n          } else {\n            // Otherwise, we pause spotlight so it is locked until the popup is ready\n            this.paused.pause();\n          }\n        } else if (this.props.open) {\n          forwardShow({}, this.props);\n          this.spotPopupContent();\n        } else if (prevProps.open) {\n          forwardHide({}, this.props);\n          this.spotActivator(prevState.activator);\n        }\n      }\n\n      checkScrimNone(this.props);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.props.open) {\n        (0, _dispatcher.off)('keydown', this.handleKeyDown);\n      }\n\n      _spotlight[\"default\"].remove(this.state.containerId);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          noAutoDismiss = _this$props2.noAutoDismiss,\n          onClose = _this$props2.onClose,\n          scrimType = _this$props2.scrimType,\n          rest = _objectWithoutProperties(_this$props2, [\"noAutoDismiss\", \"onClose\", \"scrimType\"]);\n\n      delete rest.no5WayClose;\n      return /*#__PURE__*/(0, _jsxRuntime.jsx)(_FloatingLayer[\"default\"], {\n        noAutoDismiss: noAutoDismiss,\n        open: this.state.floatLayerOpen,\n        onOpen: this.handleFloatingLayerOpen,\n        onDismiss: onClose,\n        scrimType: scrimType,\n        children: /*#__PURE__*/(0, _jsxRuntime.jsx)(SkinnedPopupBase, _objectSpread(_objectSpread({}, rest), {}, {\n          \"data-webos-voice-exclusive\": true,\n          onHide: this.handlePopupHide,\n          onShow: this.handlePopupShow,\n          open: this.state.popupOpen >= OpenState.OPENING,\n          spotlightId: this.state.containerId\n        }))\n      });\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      if (props.open !== state.prevOpen) {\n        if (props.open) {\n          return {\n            popupOpen: props.noAnimation || state.floatLayerOpen ? OpenState.OPEN : OpenState.CLOSED,\n            floatLayerOpen: true,\n            activator: _spotlight[\"default\"].getCurrent(),\n            prevOpen: props.open\n          };\n        } else {\n          // Disables the spotlight conatiner of popup when `noAnimation` set\n          if (props.noAnimation) {\n            var node = getContainerNode(state.containerId);\n\n            if (node) {\n              node.dataset['spotlightContainerDisabled'] = true;\n            }\n          }\n\n          return {\n            popupOpen: OpenState.CLOSED,\n            floatLayerOpen: state.popupOpen === OpenState.OPEN ? !props.noAnimation : false,\n            activator: props.noAnimation ? null : state.activator,\n            prevOpen: props.open\n          };\n        }\n      }\n\n      return null;\n    }\n  }]);\n\n  return Popup;\n}(_react.Component);\n\nexports.Popup = Popup;\nPopup.propTypes =\n/** @lends sandstone/Popup.Popup.prototype */\n{\n  /**\n   * Hint string read when focusing the popup close button.\n   *\n   * @type {String}\n   * @default 'Close'\n   * @public\n   */\n  closeButtonAriaLabel: _propTypes[\"default\"].string,\n\n  /**\n   * Prevents closing the popup via 5-way navigation out of the content.\n   *\n   * @type {Boolean}\n   * @default false\n   * @private\n   */\n  no5WayClose: _propTypes[\"default\"].bool,\n\n  /**\n   * Disables transition animation.\n   *\n   * @type {Boolean}\n   * @default false\n   * @public\n   */\n  noAnimation: _propTypes[\"default\"].bool,\n\n  /**\n   * Indicates that the popup will not trigger `onClose` on the *ESC* key press.\n   *\n   * @type {Boolean}\n   * @default false\n   * @public\n   */\n  noAutoDismiss: _propTypes[\"default\"].bool,\n\n  /**\n   * Called on:\n   *\n   * * pressing `ESC` key,\n   * * clicking on the close button, or\n   * * moving spotlight focus outside the boundary of the popup when `spotlightRestrict` is\n   *   `'self-first'`.\n   *\n   * It is the responsibility of the callback to set the `open` property to `false`.\n   *\n   * @type {Function}\n   * @public\n   */\n  onClose: _propTypes[\"default\"].func,\n\n  /**\n   * Called after hide transition has completed, and immediately with no transition.\n   *\n   * @type {Function}\n   * @public\n   */\n  onHide: _propTypes[\"default\"].func,\n\n  /**\n   * Called when a key is pressed.\n   *\n   * @type {Function}\n   * @public\n   */\n  onKeyDown: _propTypes[\"default\"].func,\n\n  /**\n   * Called after show transition has completed, and immediately with no transition.\n   *\n   * Note: The function does not run if Popup is initially opened and\n   * [noAnimation]{@link sandstone/Popup.PopupBase#noAnimation} is `true`.\n   *\n   * @type {Function}\n   * @public\n   */\n  onShow: _propTypes[\"default\"].func,\n\n  /**\n   * Controls the visibility of the Popup.\n   *\n   * By default, the Popup and its contents are not rendered until `open`.\n   *\n   * @type {Boolean}\n   * @default false\n   * @public\n   */\n  open: _propTypes[\"default\"].bool,\n\n  /**\n   * Position of the Popup on the screen.\n   *\n   * @type {('bottom'|'center'|'fullscreen'|'left'|'right'|'top')}\n   * @default 'bottom'\n   * @public\n   */\n  position: _propTypes[\"default\"].oneOf(['bottom', 'center', 'fullscreen', 'left', 'right', 'top']),\n\n  /**\n   * Scrim type.\n   *\n   * * Values: `'transparent'`, `'translucent'`, or `'none'`.\n   *\n   * `'none'` is not compatible with `spotlightRestrict` of `'self-only'`, use a transparent scrim\n   * to prevent mouse focus when using popup.\n   *\n   * @type {('transparent'|'translucent'|'none')}\n   * @default 'translucent'\n   * @public\n   */\n  scrimType: _propTypes[\"default\"].oneOf(['transparent', 'translucent', 'none']),\n\n  /**\n   * Restricts or prioritizes navigation when focus attempts to leave the popup.\n   *\n   * * Values: `'self-first'`, or `'self-only'`.\n   *\n   * When using `self-first`, attempts to leave the popup via 5-way will fire `onClose` based\n   * on the following values of `position`:\n   *\n   * * `'bottom'` - When leaving via 5-way up\n   * * `'top'` - When leaving via 5-way down\n   * * `'left'` - When leaving via 5-way right\n   * * `'right'` - When leaving via 5-way left\n   * * `'center'` - When leaving via any 5-way direction\n   *\n   * Note: If `onClose` is not set, then this has no effect on 5-way navigation. If the popup\n   * has no spottable children, 5-way navigation will cause the Popup to fire `onClose`.\n   *\n   * @type {('self-first'|'self-only')}\n   * @default 'self-only'\n   * @public\n   */\n  spotlightRestrict: _propTypes[\"default\"].oneOf(['self-first', 'self-only'])\n};\nPopup.defaultProps = {\n  noAnimation: false,\n  noAutoDismiss: false,\n  open: false,\n  position: 'bottom',\n  scrimType: 'translucent',\n  spotlightRestrict: 'self-only'\n};\nvar _default = Popup;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["C:/Users/tak43/remaking/node_modules/@enact/sandstone/Popup/Popup.js"],"names":["Object","defineProperty","exports","value","PopupBase","Popup","_keymap","require","_dispatcher","_FloatingLayer","_interopRequireDefault","_kind","_react","_propTypes","_spotlight","_interopRequireWildcard","_Pause","_SpotlightContainerDecorator","_Transition","_handle","_warning","_Skinnable","_PopupModule","_jsxRuntime","_getRequireWildcardCache","WeakMap","cache","obj","__esModule","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","push","_objectSpread","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","isDown","is","isLeft","isRight","isUp","TransitionContainer","enterTo","preserveId","getContainerNode","containerId","document","querySelector","concat","forwardHide","forward","forwardShow","transitionDirection","bottom","center","fullscreen","left","right","top","name","propTypes","children","node","isRequired","oneOfType","string","css","noAlertRole","bool","noAnimation","onHide","func","onShow","open","position","oneOf","role","spotlightId","spotlightRestrict","defaultProps","styles","className","publicClassNames","computed","ariaLive","_ref","live","_ref2","styler","append","direction","_ref3","_ref4","_role","transitionContainerClassName","_ref5","join","popupTransitionContainer","render","_ref6","rest","jsx","duration","spotlightDisabled","type","visible","body","SkinnedPopupBase","checkScrimNone","validScrim","scrimType","process","env","NODE_ENV","OpenState","CLOSED","OPENING","OPEN","_Component","_super","_this","handleFloatingLayerOpen","state","popupOpen","setState","spotPopupContent","handleKeyDown","ev","_this$props","onClose","no5WayClose","keyCode","getDirection","spottables","getSpottableDescendants","current","getCurrent","contains","restrict","focusChanged","move","stopPropagation","preventDefault","setPointerMode","handlePopupHide","floatLayerOpen","activator","currentTarget","getAttribute","spotActivator","handlePopupShow","paused","resume","containerNode","off","isPaused","focus","on","blur","setActiveContainer","prevOpen","add","componentDidMount","pause","componentDidUpdate","prevProps","prevState","componentWillUnmount","remove","_this$props2","noAutoDismiss","onOpen","onDismiss","getDerivedStateFromProps","dataset","Component","closeButtonAriaLabel","onKeyDown","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PopupBase = exports.Popup = exports[\"default\"] = void 0;\n\nvar _keymap = require(\"@enact/core/keymap\");\n\nvar _dispatcher = require(\"@enact/core/dispatcher\");\n\nvar _FloatingLayer = _interopRequireDefault(require(\"@enact/ui/FloatingLayer\"));\n\nvar _kind = _interopRequireDefault(require(\"@enact/core/kind\"));\n\nvar _react = require(\"react\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _spotlight = _interopRequireWildcard(require(\"@enact/spotlight\"));\n\nvar _Pause = _interopRequireDefault(require(\"@enact/spotlight/Pause\"));\n\nvar _SpotlightContainerDecorator = _interopRequireDefault(require(\"@enact/spotlight/SpotlightContainerDecorator\"));\n\nvar _Transition = _interopRequireDefault(require(\"@enact/ui/Transition\"));\n\nvar _handle = require(\"@enact/core/handle\");\n\nvar _warning = _interopRequireDefault(require(\"warning\"));\n\nvar _Skinnable = _interopRequireDefault(require(\"../Skinnable\"));\n\nvar _PopupModule = _interopRequireDefault(require(\"./Popup.module.css\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nvar isDown = (0, _keymap.is)('down');\nvar isLeft = (0, _keymap.is)('left');\nvar isRight = (0, _keymap.is)('right');\nvar isUp = (0, _keymap.is)('up');\nvar TransitionContainer = (0, _SpotlightContainerDecorator[\"default\"])({\n  enterTo: 'default-element',\n  preserveId: true\n}, _Transition[\"default\"]);\n\nvar getContainerNode = function getContainerNode(containerId) {\n  return document.querySelector(\"[data-spotlight-id='\".concat(containerId, \"']\"));\n};\n\nvar forwardHide = (0, _handle.forward)('onHide');\nvar forwardShow = (0, _handle.forward)('onShow');\nvar transitionDirection = {\n  bottom: 'down',\n  center: 'down',\n  fullscreen: 'down',\n  left: 'left',\n  right: 'right',\n  top: 'up'\n};\n/**\n * The base popup component.\n *\n * @class PopupBase\n * @memberof sandstone/Popup\n * @ui\n * @public\n */\n\nvar PopupBase = (0, _kind[\"default\"])({\n  name: 'PopupBase',\n  propTypes:\n  /** @lends sandstone/Popup.PopupBase.prototype */\n  {\n    /**\n     * The contents to be displayed in the body of the popup.\n     *\n     * @type {Node}\n     * @required\n     * @public\n     */\n    children: _propTypes[\"default\"].node.isRequired,\n\n    /**\n     * Set the priority with which screen reader should treat updates to live regions for the Popup.\n     *\n     * @type {String|Object}\n     * @public\n     */\n    'aria-live': _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].object]),\n\n    /**\n     * Customizes the component by mapping the supplied collection of CSS class names to the\n     * corresponding internal elements and states of this component.\n     *\n     * The following classes are supported:\n     *\n     * * `popup` - The root class name\n     * * `body` - Applied to the body content container\n     * * `popupTransitionContainer` - Applied to the Popup's outermost container. Sizing can be\n     *                                applied here for percentage-of-screen values.\n     * * `top` - Applied when the `position` is 'top'\n     * * `right` - Applied when the `position` is 'right'\n     * * `bottom` - Applied when the `position` is 'bottom'\n     * * `left` - Applied when the `position` is 'left'\n     *\n     * @type {Object}\n     * @private\n     */\n    css: _propTypes[\"default\"].object,\n\n    /**\n     * Support accessibility options.\n     *\n     * If true, the aria-live and role in Popup are `null`.\n     *\n     * @type {Boolean}\n     * @default false\n     * @private\n     */\n    noAlertRole: _propTypes[\"default\"].bool,\n\n    /**\n     * Disables transition animation.\n     *\n     * @type {Boolean}\n     * @default false\n     * @public\n     */\n    noAnimation: _propTypes[\"default\"].bool,\n\n    /**\n     * Called after the popup's \"hide\" transition finishes.\n     *\n     * @type {Function}\n     * @public\n     */\n    onHide: _propTypes[\"default\"].func,\n\n    /**\n     * Called after the popup's \"show\" transition finishes.\n     *\n     * @type {Function}\n     * @public\n     */\n    onShow: _propTypes[\"default\"].func,\n\n    /**\n     * Controls the visibility of the Popup.\n     *\n     * By default, the Popup and its contents are not rendered until `open`.\n     *\n     * @type {Boolean}\n     * @default false\n     * @public\n     */\n    open: _propTypes[\"default\"].bool,\n\n    /**\n     * Position of the Popup on the screen.\n     *\n     * @type {('bottom'|'center'|'fullscreen'|'left'|'right'|'top')}\n     * @default 'bottom'\n     * @public\n     */\n    position: _propTypes[\"default\"].oneOf(['bottom', 'center', 'fullscreen', 'left', 'right', 'top']),\n\n    /**\n     * The ARIA role for the Popup.\n     *\n     * @type {String|Object}\n     * @public\n     */\n    role: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].object]),\n\n    /**\n     * The container id for {@link spotlight/Spotlight}.\n     *\n     * @type {String}\n     * @default null\n     * @public\n     */\n    spotlightId: _propTypes[\"default\"].string,\n\n    /**\n     * Restricts or prioritizes navigation when focus attempts to leave the popup.\n     *\n     * It can be either `'none'`, `'self-first'`, or `'self-only'`.\n     *\n     * Note: The ready-to-use [Popup]{@link sandstone/Popup.Popup} component only supports\n     * `'self-first'` and `'self-only'`.\n     *\n     * @type {('none'|'self-first'|'self-only')}\n     * @default 'self-only'\n     * @public\n     */\n    spotlightRestrict: _propTypes[\"default\"].oneOf(['none', 'self-first', 'self-only'])\n  },\n  defaultProps: {\n    noAlertRole: false,\n    noAnimation: false,\n    open: false,\n    position: 'bottom',\n    spotlightRestrict: 'self-only'\n  },\n  styles: {\n    css: _PopupModule[\"default\"],\n    className: 'popup',\n    publicClassNames: ['popup', 'body', 'popupTransitionContainer', 'top', 'right', 'bottom', 'left']\n  },\n  computed: {\n    // When passing `aria-live` prop to the Popup, the prop should work first.\n    // If `noAlertRole` is true, alert role and aria-live will be removed. Contents of the popup won't be read automatically when opened.\n    // Otherwise, `aria-live` will be usually `off`.\n    'aria-live': function ariaLive(_ref) {\n      var live = _ref['aria-live'],\n          noAlertRole = _ref.noAlertRole;\n      return typeof live !== 'undefined' ? live : !noAlertRole && 'off' || null;\n    },\n    className: function className(_ref2) {\n      var position = _ref2.position,\n          styler = _ref2.styler;\n      return styler.append(position);\n    },\n    direction: function direction(_ref3) {\n      var position = _ref3.position;\n      return transitionDirection[position];\n    },\n    // When passing `role` prop to the Popup, the prop should work first.\n    // If `noAlertRole` is true, alert role and aria-live will be removed. Contents of the popup won't be read automatically when opened.\n    // Otherwise, `role` will be usually `alert`.\n    role: function role(_ref4) {\n      var noAlertRole = _ref4.noAlertRole,\n          _role = _ref4.role;\n      return typeof _role !== 'undefined' ? _role : !noAlertRole && 'alert' || null;\n    },\n    transitionContainerClassName: function transitionContainerClassName(_ref5) {\n      var css = _ref5.css,\n          position = _ref5.position,\n          styler = _ref5.styler;\n      return styler.join(css.popupTransitionContainer, position);\n    }\n  },\n  render: function render(_ref6) {\n    var children = _ref6.children,\n        css = _ref6.css,\n        direction = _ref6.direction,\n        noAnimation = _ref6.noAnimation,\n        onHide = _ref6.onHide,\n        onShow = _ref6.onShow,\n        open = _ref6.open,\n        position = _ref6.position,\n        spotlightId = _ref6.spotlightId,\n        spotlightRestrict = _ref6.spotlightRestrict,\n        transitionContainerClassName = _ref6.transitionContainerClassName,\n        rest = _objectWithoutProperties(_ref6, [\"children\", \"css\", \"direction\", \"noAnimation\", \"onHide\", \"onShow\", \"open\", \"position\", \"spotlightId\", \"spotlightRestrict\", \"transitionContainerClassName\"]);\n\n    delete rest.noAlertRole;\n    return /*#__PURE__*/(0, _jsxRuntime.jsx)(TransitionContainer, {\n      className: transitionContainerClassName,\n      css: css,\n      direction: direction,\n      duration: \"short\",\n      noAnimation: position === 'fullscreen' ? true : noAnimation,\n      onHide: onHide,\n      onShow: onShow,\n      spotlightDisabled: !open,\n      spotlightId: spotlightId,\n      spotlightRestrict: spotlightRestrict,\n      type: \"slide\",\n      visible: open,\n      children: /*#__PURE__*/(0, _jsxRuntime.jsx)(\"div\", _objectSpread(_objectSpread({}, rest), {}, {\n        children: /*#__PURE__*/(0, _jsxRuntime.jsx)(\"div\", {\n          className: css.body,\n          children: children\n        })\n      }))\n    });\n  }\n});\nexports.PopupBase = PopupBase;\nvar SkinnedPopupBase = (0, _Skinnable[\"default\"])(PopupBase); // Deprecate using scrimType 'none' with spotlightRestrict of 'self-only'\n\nvar checkScrimNone = function checkScrimNone(props) {\n  var validScrim = !(props.scrimType === 'none' && props.spotlightRestrict === 'self-only');\n  process.env.NODE_ENV !== \"production\" ? (0, _warning[\"default\"])(validScrim, \"Using 'spotlightRestrict' of 'self-only' without a scrim \" + 'is not supported. Use a transparent scrim to prevent spotlight focus outside of the popup') : void 0;\n};\n\nvar OpenState = {\n  CLOSED: 0,\n  OPENING: 1,\n  OPEN: 2\n};\n/**\n * A stateful component that renders a popup in a\n * [FloatingLayer]{@link ui/FloatingLayer.FloatingLayer}.\n *\n * @class Popup\n * @memberof sandstone/Popup\n * @extends sandstone/Popup.PopupBase\n * @ui\n * @public\n */\n\nvar Popup = /*#__PURE__*/function (_Component) {\n  _inherits(Popup, _Component);\n\n  var _super = _createSuper(Popup);\n\n  function Popup(props) {\n    var _this;\n\n    _classCallCheck(this, Popup);\n\n    _this = _super.call(this, props);\n\n    _this.handleFloatingLayerOpen = function () {\n      if (!_this.props.noAnimation && _this.state.popupOpen !== OpenState.OPEN) {\n        _this.setState({\n          popupOpen: OpenState.OPENING\n        });\n      } else if (_this.state.popupOpen === OpenState.OPEN && _this.props.open) {\n        _this.spotPopupContent();\n      }\n    };\n\n    _this.handleKeyDown = function (ev) {\n      var _this$props = _this.props,\n          onClose = _this$props.onClose,\n          no5WayClose = _this$props.no5WayClose,\n          position = _this$props.position,\n          spotlightRestrict = _this$props.spotlightRestrict;\n      if (no5WayClose) return;\n      var containerId = _this.state.containerId;\n      var keyCode = ev.keyCode;\n      var direction = (0, _spotlight.getDirection)(keyCode);\n\n      var spottables = _spotlight[\"default\"].getSpottableDescendants(containerId).length;\n\n      var current = _spotlight[\"default\"].getCurrent();\n\n      if (direction && (!spottables || current && getContainerNode(containerId).contains(current))) {\n        // explicitly restrict navigation in order to manage focus state when attempting to leave the popup\n        _spotlight[\"default\"].set(containerId, {\n          restrict: 'self-only'\n        });\n\n        if (onClose) {\n          var focusChanged;\n\n          if (spottables && current && spotlightRestrict !== 'self-only') {\n            focusChanged = _spotlight[\"default\"].move(direction);\n\n            if (focusChanged) {\n              // stop propagation to prevent default spotlight behavior\n              ev.stopPropagation();\n            }\n          }\n\n          if (!spottables || focusChanged === false && (position === 'center' || isUp(keyCode) && position === 'bottom' || isDown(keyCode) && position === 'top' || isRight(keyCode) && position === 'left' || isLeft(keyCode) && position === 'right')) {\n            // prevent default page scrolling\n            ev.preventDefault(); // stop propagation to prevent default spotlight behavior\n\n            ev.stopPropagation(); // set the pointer mode to false on keydown\n\n            _spotlight[\"default\"].setPointerMode(false);\n\n            onClose(ev);\n          }\n        }\n      }\n    };\n\n    _this.handlePopupHide = function (ev) {\n      forwardHide(ev, _this.props);\n\n      _this.setState({\n        floatLayerOpen: false,\n        activator: null\n      });\n\n      if (!ev.currentTarget || ev.currentTarget.getAttribute('data-spotlight-id') === _this.state.containerId) {\n        _this.spotActivator(_this.state.activator);\n      }\n    };\n\n    _this.handlePopupShow = function (ev) {\n      forwardShow(ev, _this.props);\n\n      _this.setState({\n        popupOpen: OpenState.OPEN\n      });\n\n      if (!ev.currentTarget || ev.currentTarget.getAttribute('data-spotlight-id') === _this.state.containerId) {\n        _this.spotPopupContent();\n      }\n    };\n\n    _this.spotActivator = function (activator) {\n      _this.paused.resume(); // only spot the activator if the popup is closed\n\n\n      if (_this.props.open) return;\n\n      var current = _spotlight[\"default\"].getCurrent();\n\n      var containerNode = getContainerNode(_this.state.containerId);\n      (0, _dispatcher.off)('keydown', _this.handleKeyDown); // if there is no currently-spotted control or it is wrapped by the popup's container, we\n      // know it's safe to change focus\n\n      if (!current || containerNode && containerNode.contains(current)) {\n        // attempt to set focus to the activator, if available\n        if (!_spotlight[\"default\"].isPaused() && !_spotlight[\"default\"].focus(activator)) {\n          _spotlight[\"default\"].focus();\n        }\n      }\n    };\n\n    _this.spotPopupContent = function () {\n      _this.paused.resume(); // only spot the activator if the popup is open\n\n\n      if (!_this.props.open) return;\n      var containerId = _this.state.containerId;\n      (0, _dispatcher.on)('keydown', _this.handleKeyDown);\n\n      if (!_spotlight[\"default\"].isPaused() && !_spotlight[\"default\"].focus(containerId)) {\n        var current = _spotlight[\"default\"].getCurrent(); // In cases where the container contains no spottable controls or we're in pointer-mode, focus\n        // cannot inherently set the active container or blur the active control, so we must do that\n        // here.\n\n\n        if (current) {\n          current.blur();\n        }\n\n        _spotlight[\"default\"].setActiveContainer(containerId);\n      }\n    };\n\n    _this.paused = new _Pause[\"default\"]('Popup');\n    _this.state = {\n      floatLayerOpen: _this.props.open,\n      popupOpen: _this.props.open ? OpenState.OPEN : OpenState.CLOSED,\n      prevOpen: _this.props.open,\n      containerId: _spotlight[\"default\"].add(),\n      activator: null\n    };\n    checkScrimNone(_this.props);\n    return _this;\n  } // Spot the content after it's mounted.\n\n\n  _createClass(Popup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.open) {\n        // If the popup is open on mount, we need to pause spotlight so nothing steals focus\n        // while the popup is rendering.\n        this.paused.pause();\n\n        if (getContainerNode(this.state.containerId)) {\n          this.spotPopupContent();\n        }\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.props.open !== prevProps.open) {\n        if (!this.props.noAnimation) {\n          if (!this.props.open && this.state.popupOpen === OpenState.CLOSED) {\n            // If the popup is supposed to be closed (!this.props.open) and is actually\n            // fully closed (OpenState.CLOSED), we must resume spotlight navigation. This\n            // can occur when quickly toggling a Popup open and closed.\n            this.paused.resume();\n          } else {\n            // Otherwise, we pause spotlight so it is locked until the popup is ready\n            this.paused.pause();\n          }\n        } else if (this.props.open) {\n          forwardShow({}, this.props);\n          this.spotPopupContent();\n        } else if (prevProps.open) {\n          forwardHide({}, this.props);\n          this.spotActivator(prevState.activator);\n        }\n      }\n\n      checkScrimNone(this.props);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.props.open) {\n        (0, _dispatcher.off)('keydown', this.handleKeyDown);\n      }\n\n      _spotlight[\"default\"].remove(this.state.containerId);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          noAutoDismiss = _this$props2.noAutoDismiss,\n          onClose = _this$props2.onClose,\n          scrimType = _this$props2.scrimType,\n          rest = _objectWithoutProperties(_this$props2, [\"noAutoDismiss\", \"onClose\", \"scrimType\"]);\n\n      delete rest.no5WayClose;\n      return /*#__PURE__*/(0, _jsxRuntime.jsx)(_FloatingLayer[\"default\"], {\n        noAutoDismiss: noAutoDismiss,\n        open: this.state.floatLayerOpen,\n        onOpen: this.handleFloatingLayerOpen,\n        onDismiss: onClose,\n        scrimType: scrimType,\n        children: /*#__PURE__*/(0, _jsxRuntime.jsx)(SkinnedPopupBase, _objectSpread(_objectSpread({}, rest), {}, {\n          \"data-webos-voice-exclusive\": true,\n          onHide: this.handlePopupHide,\n          onShow: this.handlePopupShow,\n          open: this.state.popupOpen >= OpenState.OPENING,\n          spotlightId: this.state.containerId\n        }))\n      });\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      if (props.open !== state.prevOpen) {\n        if (props.open) {\n          return {\n            popupOpen: props.noAnimation || state.floatLayerOpen ? OpenState.OPEN : OpenState.CLOSED,\n            floatLayerOpen: true,\n            activator: _spotlight[\"default\"].getCurrent(),\n            prevOpen: props.open\n          };\n        } else {\n          // Disables the spotlight conatiner of popup when `noAnimation` set\n          if (props.noAnimation) {\n            var node = getContainerNode(state.containerId);\n\n            if (node) {\n              node.dataset['spotlightContainerDisabled'] = true;\n            }\n          }\n\n          return {\n            popupOpen: OpenState.CLOSED,\n            floatLayerOpen: state.popupOpen === OpenState.OPEN ? !props.noAnimation : false,\n            activator: props.noAnimation ? null : state.activator,\n            prevOpen: props.open\n          };\n        }\n      }\n\n      return null;\n    }\n  }]);\n\n  return Popup;\n}(_react.Component);\n\nexports.Popup = Popup;\nPopup.propTypes =\n/** @lends sandstone/Popup.Popup.prototype */\n{\n  /**\n   * Hint string read when focusing the popup close button.\n   *\n   * @type {String}\n   * @default 'Close'\n   * @public\n   */\n  closeButtonAriaLabel: _propTypes[\"default\"].string,\n\n  /**\n   * Prevents closing the popup via 5-way navigation out of the content.\n   *\n   * @type {Boolean}\n   * @default false\n   * @private\n   */\n  no5WayClose: _propTypes[\"default\"].bool,\n\n  /**\n   * Disables transition animation.\n   *\n   * @type {Boolean}\n   * @default false\n   * @public\n   */\n  noAnimation: _propTypes[\"default\"].bool,\n\n  /**\n   * Indicates that the popup will not trigger `onClose` on the *ESC* key press.\n   *\n   * @type {Boolean}\n   * @default false\n   * @public\n   */\n  noAutoDismiss: _propTypes[\"default\"].bool,\n\n  /**\n   * Called on:\n   *\n   * * pressing `ESC` key,\n   * * clicking on the close button, or\n   * * moving spotlight focus outside the boundary of the popup when `spotlightRestrict` is\n   *   `'self-first'`.\n   *\n   * It is the responsibility of the callback to set the `open` property to `false`.\n   *\n   * @type {Function}\n   * @public\n   */\n  onClose: _propTypes[\"default\"].func,\n\n  /**\n   * Called after hide transition has completed, and immediately with no transition.\n   *\n   * @type {Function}\n   * @public\n   */\n  onHide: _propTypes[\"default\"].func,\n\n  /**\n   * Called when a key is pressed.\n   *\n   * @type {Function}\n   * @public\n   */\n  onKeyDown: _propTypes[\"default\"].func,\n\n  /**\n   * Called after show transition has completed, and immediately with no transition.\n   *\n   * Note: The function does not run if Popup is initially opened and\n   * [noAnimation]{@link sandstone/Popup.PopupBase#noAnimation} is `true`.\n   *\n   * @type {Function}\n   * @public\n   */\n  onShow: _propTypes[\"default\"].func,\n\n  /**\n   * Controls the visibility of the Popup.\n   *\n   * By default, the Popup and its contents are not rendered until `open`.\n   *\n   * @type {Boolean}\n   * @default false\n   * @public\n   */\n  open: _propTypes[\"default\"].bool,\n\n  /**\n   * Position of the Popup on the screen.\n   *\n   * @type {('bottom'|'center'|'fullscreen'|'left'|'right'|'top')}\n   * @default 'bottom'\n   * @public\n   */\n  position: _propTypes[\"default\"].oneOf(['bottom', 'center', 'fullscreen', 'left', 'right', 'top']),\n\n  /**\n   * Scrim type.\n   *\n   * * Values: `'transparent'`, `'translucent'`, or `'none'`.\n   *\n   * `'none'` is not compatible with `spotlightRestrict` of `'self-only'`, use a transparent scrim\n   * to prevent mouse focus when using popup.\n   *\n   * @type {('transparent'|'translucent'|'none')}\n   * @default 'translucent'\n   * @public\n   */\n  scrimType: _propTypes[\"default\"].oneOf(['transparent', 'translucent', 'none']),\n\n  /**\n   * Restricts or prioritizes navigation when focus attempts to leave the popup.\n   *\n   * * Values: `'self-first'`, or `'self-only'`.\n   *\n   * When using `self-first`, attempts to leave the popup via 5-way will fire `onClose` based\n   * on the following values of `position`:\n   *\n   * * `'bottom'` - When leaving via 5-way up\n   * * `'top'` - When leaving via 5-way down\n   * * `'left'` - When leaving via 5-way right\n   * * `'right'` - When leaving via 5-way left\n   * * `'center'` - When leaving via any 5-way direction\n   *\n   * Note: If `onClose` is not set, then this has no effect on 5-way navigation. If the popup\n   * has no spottable children, 5-way navigation will cause the Popup to fire `onClose`.\n   *\n   * @type {('self-first'|'self-only')}\n   * @default 'self-only'\n   * @public\n   */\n  spotlightRestrict: _propTypes[\"default\"].oneOf(['self-first', 'self-only'])\n};\nPopup.defaultProps = {\n  noAnimation: false,\n  noAutoDismiss: false,\n  open: false,\n  position: 'bottom',\n  scrimType: 'translucent',\n  spotlightRestrict: 'self-only'\n};\nvar _default = Popup;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"module"}