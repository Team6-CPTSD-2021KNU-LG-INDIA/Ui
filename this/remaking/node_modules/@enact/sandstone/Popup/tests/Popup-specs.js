"use strict";

var _FloatingLayer = require("@enact/ui/FloatingLayer");

var _enzyme = require("enzyme");

var _Popup = require("../Popup");

var _PopupModule = _interopRequireDefault(require("../Popup.module.css"));

var _jsxRuntime = require("react/jsx-runtime");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var FloatingLayerController = (0, _FloatingLayer.FloatingLayerDecorator)('div');
describe('Popup specs', function () {
  it('should be rendered opened if open is set to true', function () {
    var popup = (0, _enzyme.mount)( /*#__PURE__*/(0, _jsxRuntime.jsx)(FloatingLayerController, {
      children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.Popup, {
        open: true,
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
          children: "popup"
        })
      })
    }));
    var expected = true;
    var actual = popup.find('FloatingLayer').prop('open');
    expect(actual).toBe(expected);
  });
  it('should not be rendered if open is set to false', function () {
    var popup = (0, _enzyme.mount)( /*#__PURE__*/(0, _jsxRuntime.jsx)(FloatingLayerController, {
      children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.Popup, {
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
          children: "popup"
        })
      })
    }));
    var expected = false;
    var actual = popup.find('FloatingLayer').prop('open');
    expect(actual).toBe(expected);
  });
  it('should set role to alert by default', function () {
    var popup = (0, _enzyme.shallow)( /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.PopupBase, {
      children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
        children: "popup"
      })
    }));
    var expected = 'alert';
    var actual = popup.find(".".concat(_PopupModule["default"].popup)).prop('role');
    expect(actual).toBe(expected);
  });
  it('should allow role to be overridden', function () {
    var popup = (0, _enzyme.shallow)( /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.PopupBase, {
      role: "dialog",
      children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
        children: "popup"
      })
    }));
    var expected = 'dialog';
    var actual = popup.find(".".concat(_PopupModule["default"].popup)).prop('role');
    expect(actual).toBe(expected);
  });
  it('should set "data-webos-voice-exclusive" when popup is open', function () {
    var popup = (0, _enzyme.mount)( /*#__PURE__*/(0, _jsxRuntime.jsx)(FloatingLayerController, {
      children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.Popup, {
        open: true,
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
          children: "popup"
        })
      })
    }));
    var expected = true;
    var actual = popup.find(".".concat(_PopupModule["default"].popup)).first().prop('data-webos-voice-exclusive');
    expect(actual).toBe(expected);
  });
  it('should set "data-webos-voice-disabled" when voice control is disabled', function () {
    var popup = (0, _enzyme.shallow)( /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.PopupBase, {
      open: true,
      "data-webos-voice-disabled": true,
      children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
        children: "popup"
      })
    }));
    var expected = true;
    var actual = popup.find(".".concat(_PopupModule["default"].popup)).prop('data-webos-voice-disabled');
    expect(actual).toBe(expected);
  });
  describe('with position bottom', function () {
    it('should have bottom class', function () {
      var popup = (0, _enzyme.shallow)( /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.PopupBase, {
        open: true,
        position: "bottom",
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
          children: "popup"
        })
      }));
      expect(popup.find(".".concat(_PopupModule["default"].popup)).prop('className').split(' ')).toContain('bottom');
    });
    it('should have bottom class in popup transition container', function () {
      var popup = (0, _enzyme.shallow)( /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.PopupBase, {
        open: true,
        position: "bottom",
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
          children: "popup"
        })
      }));
      expect(popup.prop('className').split(' ')).toContain('bottom');
    });
  });
  describe('with position left', function () {
    it('should have left class', function () {
      var popup = (0, _enzyme.shallow)( /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.PopupBase, {
        open: true,
        position: "left",
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
          children: "popup"
        })
      }));
      expect(popup.find(".".concat(_PopupModule["default"].popup)).prop('className').split(' ')).toContain('left');
    });
    it('should have left class in popup transition container', function () {
      var popup = (0, _enzyme.shallow)( /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.PopupBase, {
        open: true,
        position: "left",
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
          children: "popup"
        })
      }));
      expect(popup.prop('className').split(' ')).toContain('left');
    });
  });
  describe('with position top', function () {
    it('should have right class', function () {
      var popup = (0, _enzyme.shallow)( /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.PopupBase, {
        open: true,
        position: "right",
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
          children: "popup"
        })
      }));
      expect(popup.find(".".concat(_PopupModule["default"].popup)).prop('className').split(' ')).toContain('right');
    });
    it('should have right class in popup transition container', function () {
      var popup = (0, _enzyme.shallow)( /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.PopupBase, {
        open: true,
        position: "right",
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
          children: "popup"
        })
      }));
      expect(popup.prop('className').split(' ')).toContain('right');
    });
  });
  describe('with position top', function () {
    it('should have top class', function () {
      var popup = (0, _enzyme.shallow)( /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.PopupBase, {
        open: true,
        position: "top",
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
          children: "popup"
        })
      }));
      expect(popup.find(".".concat(_PopupModule["default"].popup)).prop('className').split(' ')).toContain('top');
    });
    it('should have top class popup transition container', function () {
      var popup = (0, _enzyme.shallow)( /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.PopupBase, {
        open: true,
        position: "top",
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
          children: "popup"
        })
      }));
      expect(popup.prop('className').split(' ')).toContain('top');
    });
  });
  describe('with position center', function () {
    it('should have center class', function () {
      var popup = (0, _enzyme.shallow)( /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.PopupBase, {
        open: true,
        position: "center",
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
          children: "popup"
        })
      }));
      expect(popup.find(".".concat(_PopupModule["default"].popup)).prop('className').split(' ')).toContain('center');
    });
    it('should have center class popup transition container', function () {
      var popup = (0, _enzyme.shallow)( /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.PopupBase, {
        open: true,
        position: "center",
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
          children: "popup"
        })
      }));
      expect(popup.prop('className').split(' ')).toContain('center');
    });
  });
  describe('with position fullscreen', function () {
    it('should have fullscreen class', function () {
      var popup = (0, _enzyme.shallow)( /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.PopupBase, {
        open: true,
        position: "fullscreen",
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
          children: "popup"
        })
      }));
      expect(popup.find(".".concat(_PopupModule["default"].popup)).prop('className').split(' ')).toContain('fullscreen');
    });
    it('should have fullscreen class popup transition container', function () {
      var popup = (0, _enzyme.shallow)( /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.PopupBase, {
        open: true,
        position: "fullscreen",
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
          children: "popup"
        })
      }));
      expect(popup.prop('className').split(' ')).toContain('fullscreen');
    });
  });
  describe('with position changes dynamically - [GT-28270]', function () {
    it('should not have top class when position change from top to any other position', function () {
      var firstPosition = 'top';
      var popup = (0, _enzyme.shallow)( /*#__PURE__*/(0, _jsxRuntime.jsx)(_Popup.PopupBase, {
        open: true,
        position: firstPosition,
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
          children: "popup"
        })
      }));
      expect(popup.find(".".concat(_PopupModule["default"].popup)).prop('className').split(' ')).toContain(firstPosition);
      expect(popup.prop('className').split(' ')).toContain(firstPosition);
      expect(popup.find(".".concat(_PopupModule["default"].popup)).prop('className').split(' ')).not.toContain('fullscreen');
      expect(popup.prop('className').split(' ')).not.toContain('fullscreen');
      expect(popup.find(".".concat(_PopupModule["default"].popup)).prop('className').split(' ')).not.toContain('center');
      expect(popup.prop('className').split(' ')).not.toContain('center');
      expect(popup.find(".".concat(_PopupModule["default"].popup)).prop('className').split(' ')).not.toContain('bottom');
      expect(popup.prop('className').split(' ')).not.toContain('bottom');
      expect(popup.find(".".concat(_PopupModule["default"].popup)).prop('className').split(' ')).not.toContain('right');
      expect(popup.prop('className').split(' ')).not.toContain('right');
      expect(popup.find(".".concat(_PopupModule["default"].popup)).prop('className').split(' ')).not.toContain('left');
      expect(popup.prop('className').split(' ')).not.toContain('left');
      popup.setProps({
        position: 'fullscreen'
      });
      expect(popup.find(".".concat(_PopupModule["default"].popup)).prop('className').split(' ')).not.toContain(firstPosition);
      expect(popup.prop('className').split(' ')).not.toContain(firstPosition);
      popup.setProps({
        position: 'center'
      });
      expect(popup.find(".".concat(_PopupModule["default"].popup)).prop('className').split(' ')).not.toContain(firstPosition);
      expect(popup.prop('className').split(' ')).not.toContain(firstPosition);
      popup.setProps({
        position: 'bottom'
      });
      expect(popup.find(".".concat(_PopupModule["default"].popup)).prop('className').split(' ')).not.toContain(firstPosition);
      expect(popup.prop('className').split(' ')).not.toContain(firstPosition);
      popup.setProps({
        position: 'left'
      });
      expect(popup.find(".".concat(_PopupModule["default"].popup)).prop('className').split(' ')).not.toContain(firstPosition);
      expect(popup.prop('className').split(' ')).not.toContain(firstPosition);
      popup.setProps({
        position: 'right'
      });
      expect(popup.find(".".concat(_PopupModule["default"].popup)).prop('className').split(' ')).not.toContain(firstPosition);
      expect(popup.prop('className').split(' ')).not.toContain(firstPosition);
    });
  });
});